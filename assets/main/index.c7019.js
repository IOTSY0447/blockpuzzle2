window.__require=function t(e,o,n){function a(r,c){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return a(e[r][1][t]||t)},u,u.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({AddCoin:[function(t,e,o){"use strict";cc._RF.push(e,"2a53d+OyG5HmaoHQe85HVy/","AddCoin");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.AddCoin=void 0;var r=t("../Core/App"),c=t("../Core/AudioManage"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldOne=null,e.baseCoutent=null,e.arrCoutent=[],e}var o;return a(e,t),o=e,e.prototype.start=function(){r.default.registerCom(o,this),this.arrCoutent.push(this.baseCoutent)},e.prototype.addCion=function(t,e,o,n,a){var i=this,s=0;r.default.AudioManage.playSound(c.MusicEnum.coin);var l=this.arrCoutent.pop();l||(l=cc.instantiate(this.baseCoutent),this.node.addChild(l));for(var u=function(u){var d=l.children[u];d||(d=cc.instantiate(h.goldOne),l.addChild(d)),d.position=t,d.active=!0,d.scale=0,d.runAction(cc.sequence(cc.delayTime(.02*u),cc.spawn(cc.moveBy(.4,cc.v2(300*(Math.random()-.5),300*(Math.random()-.5))).easing(cc.easeSineIn()),cc.sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.2,1))),cc.moveTo(.8,e).easing(cc.easeSineIn()),cc.callFunc(function(){d.active=!1,s+=1,null==n||n(s/o),s==Math.floor(o/2)&&r.default.AudioManage.playSound(c.MusicEnum.fly),s>=o&&(null==a||a(),i.arrCoutent.push(l))})))},h=this,d=0;d<o;d++)u(d)},i([u(cc.Node)],e.prototype,"goldOne",void 0),i([u(cc.Node)],e.prototype,"baseCoutent",void 0),o=i([l],e)}(cc.Component);o.AddCoin=h,cc._RF.pop()},{"../Core/App":"App","../Core/AudioManage":"AudioManage"}],App:[function(t,e,o){"use strict";cc._RF.push(e,"9dda7PmQ3ZCp5hsQ2VJLqZ/","App"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Tool/PoolManage"),a=t("./AudioManage"),i=t("./EffectManage"),r=t("./GameManage"),c=t("./LocalManage"),s=t("./UIManage"),l=function(){function t(){}return Object.defineProperty(t,"buttonAnction",{get:function(){return this._buttonAnction},set:function(t){this._buttonAnction=Math.max(this._buttonAnction,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isPlayAnction",{get:function(){return this._isPlayAnctionCount>0},set:function(t){t?this._isPlayAnctionCount++:this._isPlayAnctionCount=Math.max(this._isPlayAnctionCount-1,0)},enumerable:!1,configurable:!0}),t.init=function(t,e,o,l){window.app=this,this.comMap=new WeakMap,this.GameManage=new r.default,this.LocaloManage=new c.default,this.UIManage=new s.default(t),this.gameData=this.LocaloManage.gameData,this.PoolManage=new n.PoolManage,this.AudioManage=new a.default(e),this.EffectManage=new i.default(o),this.noADsNode=l,this.noADsNode.active=!1},t.getCanControl=function(){return!(this.isPlayAnction||this.buttonAnction>0)},t.registerCom=function(e,o){this.comMap.has(e)&&(this.comMap.delete(e),console.warn("\u91cd\u590d\u8bbe\u7f6e\uff1a",e.name)),this.comMap.set(e,o),this.setProtoFun(o,"onDestroy",function(){t.removeCom(o.__proto__.constructor)})},t.setProtoFun=function(t,e,o){var n=t.__proto__[e];t.__proto__["lzl_test_"+e]||(t.__proto__["lzl_test_"+e]=!0,t.__proto__[e]=n?function(){o(),null==n||n.call(this)}:function(){o()})},t.removeCom=function(t){this.comMap.has(t)?this.comMap.delete(t):(console.warn("\u79fb\u9664\u5931\u8d25\uff1a",t),console.error(this.comMap))},t.getCom=function(t){return this.hasCom(t)||console.error(t.name,"\u672a\u6ce8\u518c\u6216\u5df2\u9500\u6bc1"),this.comMap.get(t)},t.hasCom=function(t){return this.comMap.has(t)},t.update=function(t){this._buttonAnction>0&&(this._buttonAnction-=t)},t.comMap=null,t._buttonAnction=0,t._isPlayAnctionCount=0,t.GameManage=null,t.LocaloManage=null,t.UIManage=null,t.gameData=null,t.PoolManage=null,t.AudioManage=null,t.EffectManage=null,t.noADsNode=null,t}();o.default=l,cc._RF.pop()},{"../Tool/PoolManage":"PoolManage","./AudioManage":"AudioManage","./EffectManage":"EffectManage","./GameManage":"GameManage","./LocalManage":"LocalManage","./UIManage":"UIManage"}],AudioManage:[function(t,e,o){"use strict";cc._RF.push(e,"b3a82V/HolAyrQkEx3g4Mu+","AudioManage"),Object.defineProperty(o,"__esModule",{value:!0}),o.MusicEnum=void 0;var n=t("./App");(function(t){t.button="button",t.bg="bg",t.break="pojilu",t.daoTime="daoTime",t.combo="Combo",t.gulici="gulici",t.error="error",t.fangzhi="fangzhi",t.PickUp="dianfangkuai",t.result="defeat",t.door="door",t.boom="boom",t.addSound="addSound",t.daojishi="daojishi",t.xinTiao="xintiao",t.qipan="qipan",t.fuhuo="fuhuo",t.addScore="addScore",t.drop="drop",t.refresh="refresh"})(o.MusicEnum||(o.MusicEnum={}));var a=function(){function t(t){this.lastMusicUrl=null,this.isMusicOn=!1,this.isSoundOn=!1,this.audioSource=null,this.loopMusicMap={},this.playingMusicMap=[],this.isMusicOn=n.default.gameData.isMusicOn,this.isSoundOn=n.default.gameData.isSoundOn,this.audioSource=t,this.audioSource.loop=!0}return t.prototype.playMusic=function(t){var e=this;if(null!=t){var o=this.lastMusicUrl;this.lastMusicUrl=t,o==t&&this.audioSource.isPlaying||this.isMusicOn&&(this.audioSource.stop(),cc.loader.loadRes("music/"+t,cc.AudioClip,function(t,o){t?console.error(t):(e.audioSource.clip=o,e.audioSource.play())}))}},t.prototype.playSound=function(t,e,o){var n=this;void 0===e&&(e=!1),void 0===o&&(o=!1),null!=t&&this.isSoundOn&&(o&&this.playingMusicMap.indexOf(t)>=0||cc.loader.loadRes("music/"+t,cc.AudioClip,function(a,i){if(a)console.error(a);else{var r=cc.audioEngine.playEffect(i,e);e&&(n.loopMusicMap[t]=r),o&&(n.playingMusicMap.push(t),cc.audioEngine.setFinishCallback(r,function(){var e=n.playingMusicMap.indexOf(t);n.playingMusicMap.splice(e,1)}))}}))},t.prototype.stopLoopSound=function(t){var e=this.loopMusicMap[t];delete this.loopMusicMap[t],cc.audioEngine.stopEffect(e)},t.prototype.switchAll=function(){this.switchMusic(),this.isSoundOn=this.isMusicOn,n.default.gameData.isSoundOn=this.isSoundOn},t.prototype.switchMusic=function(){this.isMusicOn=!this.isMusicOn,n.default.gameData.isMusicOn=this.isMusicOn,this.audioSource.isPlaying&&!this.isMusicOn?this.audioSource.stop():!this.audioSource.isPlaying&&this.isMusicOn&&this.playMusic(this.lastMusicUrl)},t.prototype.switchSound=function(){this.isSoundOn=!this.isSoundOn,n.default.gameData.isSoundOn=this.isSoundOn},t}();o.default=a,cc._RF.pop()},{"./App":"App"}],BaseAnction:[function(t,e,o){"use strict";cc._RF.push(e,"067d3fR9+pE9aT/rpd6CYHe","BaseAnction");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.BaseAnction=void 0;var r,c=t("./App"),s=t("./BaseUI");(function(t){t[t.None=0]="None",t[t.Pop_ups=1]="Pop_ups",t[t.Fly_TCB=2]="Fly_TCB"})(r||(r={}));var l=cc._decorator,u=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=r.None,e.anctionConfig={0:[],1:["OA_maskBg","OA_maskBg_opacity","OA_content"],2:["OA_maskBg","OA_maskBg_opacity","OA_content","arrTopNode","arrBottomNode"]},e.OA_maskBg=null,e.OA_maskBg_opacity=180,e.OA_content=null,e.arrTopNode=[],e.arrBottomNode=[],e.arrTopInitP=[],e.arrBottomP=[],e}return a(e,t),Object.defineProperty(e.prototype,"anctionType",{get:function(){return this._type},set:function(t){var e=this;this.anctionConfig[this._type].forEach(function(t){cc.Class.Attr.setClassAttr(e,t,"visible",!1)}),this._type=t,this.anctionConfig[this._type].forEach(function(t){cc.Class.Attr.setClassAttr(e,t,"visible",!0)})},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){switch(this.anctionType){case r.Pop_ups:this.showPop_ups();break;case r.Fly_TCB:this.showFly_TCB()}},e.prototype.onOAOver=function(){},e.prototype.doClose=function(t){switch(this.anctionType){case r.Pop_ups:this.closePop_ups(t);break;case r.Fly_TCB:this.closeFly_TCB(t);break;default:null==t||t(),c.default.UIManage.hidUINode(this.node)}},e.prototype.showPop_ups=function(){var t=this;c.default.isPlayAnction=!0,this.OA_maskBg.opacity=0,cc.tween(this.OA_maskBg).to(.4,{opacity:this.OA_maskBg_opacity}).start(),this.OA_content.scale=0,cc.tween(this.OA_content).to(.4,{scale:1},{easing:cc.easing.backOut}).call(function(){c.default.isPlayAnction=!1,t.onOAOver()}).start()},e.prototype.closePop_ups=function(t){var e=this;c.default.isPlayAnction=!0,cc.tween(this.OA_maskBg).to(.5,{opacity:0}).start(),cc.tween(this.OA_content).to(.5,{scale:0},{easing:cc.easing.backIn}).call(function(){c.default.isPlayAnction=!1,null==t||t(),c.default.UIManage.hidUINode(e.node)}).start()},e.prototype.showFly_TCB=function(){var t=this;this.OA_maskBg.opacity=0,cc.tween(this.OA_maskBg).to(.5,{opacity:this.OA_maskBg_opacity}).start(),this.arrTopNode.forEach(function(e,o){var n=t.arrTopInitP[o];e.position=cc.v3(n.x,n.y+500),cc.tween(e).to(.5,{position:n},{easing:cc.easing.backOut}).start()}),this.OA_content.scale=0,cc.tween(this.OA_content).delay(.25).to(.5,{scale:1},{easing:cc.easing.backOut}).start(),this.arrBottomNode.forEach(function(e,o){var n=t.arrBottomP[o];e.position=cc.v3(n.x,n.y-500),cc.tween(e).delay(.5).to(.5,{position:n},{easing:cc.easing.backOut}).start()})},e.prototype.closeFly_TCB=function(t){null==t||t(),c.default.UIManage.hidUINode(this.node)},i([h({visible:!1})],e.prototype,"_type",void 0),i([h({tooltip:"\u663e\u793a\u52a8\u753b",type:cc.Enum(r)})],e.prototype,"anctionType",null),i([h({tooltip:"\u906e\u7f69",type:cc.Node,visible:!1})],e.prototype,"OA_maskBg",void 0),i([h({tooltip:"\u906e\u7f69\u900f\u660e\u5ea6",visible:!1})],e.prototype,"OA_maskBg_opacity",void 0),i([h({tooltip:"\u7f29\u653e\u8282\u70b9",type:cc.Node,visible:!1})],e.prototype,"OA_content",void 0),i([h({tooltip:"\u906e\u7f69",type:cc.Node,visible:!1})],e.prototype,"arrTopNode",void 0),i([h({tooltip:"\u906e\u7f69",type:cc.Node,visible:!1})],e.prototype,"arrBottomNode",void 0),i([u],e)}(s.BaseUI);o.BaseAnction=d,cc._RF.pop()},{"./App":"App","./BaseUI":"BaseUI"}],BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"19c9cUYy7lJ260AXn0Y2lo/","BaseUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.BaseUI=void 0;var r=t("./App"),c=t("./AudioManage"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.args=null,e}return a(e,t),e.prototype.onCreat=function(){r.default.registerCom(this.__proto__.constructor,this)},e.prototype.clickEvent=function(t){if(r.default.buttonAnction>0)cc.warn("\u6309\u94aecd:",r.default.buttonAnction);else if(r.default.isPlayAnction)cc.warn("\u6b63\u5728\u64ad\u52a8\u753b");else{r.default.buttonAnction=.3;var e=t.currentTarget,o=e.name;this.onClick(o,e),r.default.AudioManage.playSound(c.MusicEnum.button)}},e.prototype.onClick=function(){},i([l],e)}(cc.Component));o.BaseUI=u,cc._RF.pop()},{"./App":"App","./AudioManage":"AudioManage"}],EffectManage:[function(t,e,o){"use strict";cc._RF.push(e,"883d67pN31OoZvVoSar5GDL","EffectManage");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.baseEffect=o.effectNameEnum=void 0;var r=t("../Tool/loadManage"),c=t("./App");(function(t){t.comb="comb",t.breakComb="breakComb",t.breakLihua="breakLihua",t.tipKuang="tipKuang",t.xiaochu="xiaochu",t.goAhead="goAhead"})(o.effectNameEnum||(o.effectNameEnum={}));var s=function(){function t(t){this.effectPool={},this.effectContet=null,this.effectContet=t}return t.prototype.showEffect=function(t,e,o,n,a,i,c){void 0===n&&(n=null),void 0===a&&(a=2),void 0===i&&(i=cc.v3());var s,l=o.convertToNodeSpaceAR(e.convertToWorldSpaceAR(i));this.effectPool[t]&&this.effectPool[t].length>0?((s=this.effectPool[t].shift()).show(l,t,a,n),null==c||c(s.node)):r.default.loadPrefab("Prefab/"+t,function(e){var i=cc.instantiate(e);i.addComponent(h),i.parent=o,(s=i.getComponent(h)).show(l,t,a,n),null==c||c(i)})},t}();o.default=s;var l=cc._decorator,u=l.ccclass,h=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectName=null,e.arrPCom=null,e.aCom=null,e.sCom=null,e.isFirst=!0,e.args=null,e}return a(e,t),e.prototype.show=function(t,e,o,n){var a=this;this.args=n,this.node.position=t,this.node.active=!0,this.effectName=e,this.onShow(),!this.arrPCom&&this.isFirst&&(this.arrPCom=this.node.getComponentsInChildren(cc.ParticleSystem)),this.arrPCom&&this.arrPCom.forEach(function(t){return t.resetSystem()}),!this.aCom&&this.isFirst&&(this.aCom=this.node.getComponent(cc.Animation)||this.node.getComponentInChildren(cc.Animation)),this.aCom&&this.aCom.play(),!this.sCom&&this.isFirst&&(this.sCom=this.node.getComponent(sp.Skeleton)||this.node.getComponentInChildren(sp.Skeleton)),this.sCom&&this.sCom.setAnimation(0,this.sCom.defaultAnimation,!1),this.scheduleOnce(function(){a.hidEffect()},o),this.isFirst=!1},e.prototype.onShow=function(){},e.prototype.hidEffect=function(){this.node.active=!1,this.arrPCom&&this.arrPCom.forEach(function(t){return t.stopSystem()}),this.aCom&&this.aCom.stop(),this.sCom&&this.sCom.clearTracks(),c.default.EffectManage.effectPool[this.effectName]||(c.default.EffectManage.effectPool[this.effectName]=[]),c.default.EffectManage.effectPool[this.effectName].push(this)},i([u],e)}(cc.Component));o.baseEffect=h,cc._RF.pop()},{"../Tool/loadManage":"loadManage","./App":"App"}],FacebookIG:[function(t,e,o){"use strict";cc._RF.push(e,"ad79cdHZddLfr6kr7LLSvyX","FacebookIG"),Object.defineProperty(o,"__esModule",{value:!0}),o.rankOne=o.logData=o.adIDFB=void 0;var n=t("../Core/App"),a=function(){function t(){}return t.videoId1="441016997190327_441528797139147",t.insertID2="441016997190327_441528640472496",t.BannerID="441016997190327_782286926396664",t}();o.adIDFB=a;var i=function(){function t(){}return t.init=function(){for(var e=t.arrLogScore.length-1;e>=0;e--)if(n.default.gameData.bestScore>=t.arrLogScore[e]){t.arrLogScore.splice(0,t.arrLogScore.indexOf(t.arrLogScore[e]));break}},t.arrLogScore=[1,2,10,100,200,500,800,1e3,1500,2e3,2500,3e3,4e3,5e3,7e3,1e4,15e3,2e4,25e3],t.arrLogTime=[1,5,10,20,50,80,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,99999],t.curInsertAdFrom="",t.curVideoAdFrom="relive",t}();o.logData=i;var r=function(){};o.rankOne=r;var c=function(){function t(){}return t.init=function(){var t=this;window.hasOwnProperty("FBInstant")?(console.log("fb\u5e7f\u544a\u521d\u59cb\u5316"),this.preloadInterstitialAd(a.insertID2),this.preloadVideoAd(a.videoId1),setInterval(function(){t.cdTime<=t.adDisTime&&(t.cdTime+=1)},1e3),this.contextID=FBInstant.context.getID(),this.playerData=FBInstant.player,this.preloadHeadImg(this.playerData.getPhoto()),this.showBannerAd(),console.log(FBInstant.getSupportedAPIs())):console.log("fb\u5e7f\u544a\u521d\u59cb\u5316")},t.getPlayID=function(){return window.hasOwnProperty("FBInstant")?this.playerData.getID():"\u6211\u662fID"},t.getPlayName=function(){return window.hasOwnProperty("FBInstant")?this.playerData.getName():"\u6211\u662f\u540d\u5b57"},t.showBannerAd=function(){FBInstant.loadBannerAdAsync(a.BannerID).then(function(){console.log("\u52a0\u8f7dBanner\u5e7f\u544a")}).catch(function(t){console.error("Banner failed to load: "+t.message)})},t.showInsertAd=function(t,e){var o=this;return cc.log("\u63d2\u5c4f"),!window.hasOwnProperty("FBInstant")||n.default.gameData.playNum<3?(console.log("no insertAd"),void(e&&e())):(this.logEvent("Showinterstitial"),this.logEvent("ShowI_"+i.curInsertAdFrom),this.cdTime<=this.adDisTime?(cc.log("\u63d2\u5c4fCD"),void(e&&e())):this.interstitialAdIsReady[t]?void this.interstitialAd[t].showAsync().then(function(){o.logEvent("Showinterstitialsuccess"),o.logEvent("ShowIsuccess_"+i.curInsertAdFrom),o.cdTime=0,o.preloadInterstitialAd(t),e&&e()}).catch(function(n){console.error(n.message),o.preloadInterstitialAd(t),e&&e()}):(console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),this.preloadInterstitialAd(t),void(e&&e())))},t.showVideoAd=function(t,e,o){var a=this;return cc.log("\u6fc0\u52b1"),window.hasOwnProperty("FBInstant")?(this.logEvent("Showreward"),this.logEvent("ShowR_"+i.curVideoAdFrom),this.getVideoIsReady(t)?void(this.videoAd[t]?(o&&o(),this.videoAd[t].showAsync().then(function(){a.logEvent("Showrewardsuccess"),a.logEvent("ShowRSuccess_"+i.curVideoAdFrom),console.log("Rewarded video watched successfully"),e(!0),a.preloadVideoAd(t)}).catch(function(o){console.error(o.message),e(!1),a.logEvent("ADClick_Not_finished"),a.preloadVideoAd(t)})):this.preloadVideoAd(t)):(n.default.GameManage.showNoADs(),void this.preloadVideoAd(t))):(console.log("\u6d4b\u8bd5\u73af\u5883"),n.default.GameManage.showNoADs(),void e(!0))},t.getVideoIsReady=function(t){var e=this.videoAdIsReady[t]&&this.videoAd[t];return console.log("AD"+e),e},t.logEvent=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=0),window.hasOwnProperty("FBInstant")&&FBInstant.logEvent(t,o,e)},t.createShortcutAsync=function(){window.hasOwnProperty("FBInstant")?FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){console.log("Shortcut created")}).catch(function(){console.log("Shortcut not created")})}):console.log("\u521b\u5efa\u5feb\u6377\u65b9\u5f0f")},t.canCreateShortcutAsync=function(t){window.hasOwnProperty("FBInstant")?FBInstant.canCreateShortcutAsync().then(function(e){e?(t&&t(),console.log("can Create Shortcut")):console.log("can not Create Shortcut")}):t&&t()},t.shareAsync=function(t,e){window.hasOwnProperty("FBInstant")?cc.loader.loadRes("share/share",function(o,n){if(o)console.log(o);else{var a=document.createElement("canvas"),i=a.getContext("2d");n.width=n.width,n.height=n.width,cc.log(n.width,n.height);var r=n.getHtmlElementObj();a.width=n.width,a.height=n.height,i.drawImage(r,0,0,a.width,a.height),FBInstant.shareAsync({intent:"REQUEST",image:a.toDataURL("image/png"),text:"X is asking for your help!",data:{myReplayData:"share"}}).then(function(){null==t||t()}).catch(function(t){console.error(t),null==e||e()})}}):cc.log("\u5206\u4eab")},t.tiaoZhan=function(){window.hasOwnProperty("FBInstant")?cc.loader.loadRes("share/share",function(t,e){if(t)console.log(t);else{var o=document.createElement("canvas"),n=o.getContext("2d"),a=cc.view.getFrameSize();e.width=a.width,e.height=a.height,cc.log(e.width,e.height);var i=e.getHtmlElementObj();o.width=e.width,o.height=e.height,n.drawImage(i,0,0,o.width,o.height);var r=o.toDataURL("image/png");FBInstant.context.chooseAsync({filters:["NEW_CONTEXT_ONLY"],minSize:3}).then(function(){console.log("\u5f39\u51fa\u6210\u529f"),FBInstant.updateAsync({action:"CUSTOM",cta:"Join The Fight",image:r,text:{default:"Let us play game together",localizations:{en_US:"Let us play game together",zh_CN:"\u6765\u73a9\u6e38\u620f\u5427\u4f19\u8ba1\uff01"}},template:"VILLAGE_INVASION",data:{myReplayData:"tiaoZhan"},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("\u6210\u529f\u53d1\u9001\u6d88\u606f")}).catch(function(t){console.log("\u5f39\u51fa\u5931\u8d25"),console.log(t)})})}}):cc.log("\u6311\u6218\u6d4b\u8bd5")},t.getRankData=function(t){var e=this;if(window.FBInstant){var o=[],a=FBInstant.player.getID(),i=n.default.gameData.playerRankData,c=function(){e.getConnectedPlayersAsync(function(n){n.find(function(t){return t.getID()==a})||n.unshift(FBInstant.player),n.forEach(function(t){var e=new r;e.isSelf=t.getID()==a,e.score=i[t.getID()]||0,e.player=t,o.push(e)}),o.sort(function(t,e){return e.score-t.score}),e.arrRankData=o,t(o)})};this.getScore(c,c)}},t.getRankDataByLocal=function(t,e){if(window.FBInstant)if(null!=this.arrRankData){for(var o=0;o<this.arrRankData.length;o++)if(this.arrRankData[o].player.getID()==FBInstant.player.getID()){this.arrRankData[o].score=Math.max(t,this.arrRankData[o].score);break}e(this.arrRankData)}else this.getRankData(function(t){e(t)})},t.shareScore=function(t){window.hasOwnProperty("FBInstant")?(this.setScore(t),this.postSessionScore(t),this.sendScoreMess()):console.log("\u5206\u4eab\u5206\u6570")},t.shock=function(t){window.hasOwnProperty("FBInstant")?n.default.gameData.isShock&&FBInstant.performHapticFeedbackAsync().then(function(){t&&t()}):console.log("\u9707\u52a8")},t.setHead=function(t,e){var o=this;if(!window.hasOwnProperty("FBInstant"))return t.spriteFrame.name="player",void console.log("\u8bbe\u7f6e\u73a9\u5bb6\u5934\u50cf");var n=e||FBInstant.player.getPhoto();this.headImgMap.hasOwnProperty(n)?t.spriteFrame=this.headImgMap[n]:cc.assetManager.loadRemote(n,{ext:".jpg"},function(e,a){var i=new cc.SpriteFrame(a);t.spriteFrame=i,t.spriteFrame.name="wanjia",o.headImgMap[n]=i})},t.getPlatform=function(){var t=FBInstant.getPlatform();cc.error(t)},t.onPlayWidthFriend=function(t,e){var o=this;if(!window.hasOwnProperty("FBInstant"))return this.isSolo=!1,void t();this.isSolo=!1;var n=function(){o.contextChooseAsync(function(){o.setOtherPlayer(function(){o.preloadHeadImg(o.playerData.getPhoto())}),null==t||t(),console.log("success contextChooseAsync")},function(){null==e||e(),console.log("fail contextChooseAsync")})};this.contextID?(this.setOtherPlayer(function(){o.preloadHeadImg(o.playerData.getPhoto())}),null==t||t()):this.getConnectedPlayersAsync(function(e){var a=e.find(function(t){return t.getID()!=FBInstant.player.getID()});a?o.contextCreateAsync(a.getID(),function(){o.setOtherPlayer(function(){o.preloadHeadImg(o.playerData.getPhoto())}),console.log("success contextCreateAsync"),null==t||t()},function(){console.log("fail contextCreateAsync"),n()}):(console.log("no friend"),n())})},t.onPlaySolo=function(){this.isSolo=!0,this.contextID=null},t.getDataAsync=function(){FBInstant.player.getDataAsync(["achievements","currentLife"]).then(function(t){console.log("data is loaded"),t.achievements,t.currentLife})},t.setDataAsync=function(){FBInstant.player.setDataAsync({achievements:["medal1","medal2","medal3"],currentLife:300}).then(function(){console.log("data is set")})},t.setScore=function(t,e){window.hasOwnProperty("FBInstant")&&FBInstant.getLeaderboardAsync("Test Leaderboard."+FBInstant.context.getID()).then(function(o){return console.log(o.getName()),o.setScoreAsync(t,e)}).then(function(){return console.log("Score saved")}).catch(function(t){return console.error(t)})},t.getScore=function(t,e){window.hasOwnProperty("FBInstant")&&FBInstant.getLeaderboardAsync("Test Leaderboard."+FBInstant.context.getID()).then(function(t){return t.getEntriesAsync(20,0)}).then(function(e){for(var o=0;o<e.length;o++){console.log(e[o].getRank()+". "+e[o].getPlayer().getName()+": "+e[o].getScore());var a=e[o].getPlayer().getID(),i=n.default.gameData.playerRankData;i.hasOwnProperty(a)?i[a]=Math.max(e[o].getScore(),i[a]):i[a]=e[o].getScore()}t(e)}).catch(function(t){console.error(t),null==e||e()})},t.preloadInterstitialAd=function(t){var e=this;this.interstitialAdIsReady[t]=!1,this.interstitialAd[t]=null,cc.log(t),FBInstant.getInterstitialAdAsync(t).then(function(o){return e.interstitialAd[t]=o,e.interstitialAd[t].loadAsync()}).then(function(){e.interstitialAdIsReady[t]=!0,console.log("Interstitial preloaded")}).catch(function(t){console.error("Interstitial failed to preload: "+t.message)})},t.preloadVideoAd=function(t){var e=this;this.videoAdIsReady[t]=!1,this.videoAd[t]=null,FBInstant.getRewardedVideoAsync(t).then(function(o){return e.videoAd[t]=o,e.videoAd[t].loadAsync()}).then(function(){e.videoAdIsReady[t]=!0,console.log("Rewarded video preloaded")}).catch(function(t){console.error("Rewarded video failed to preload: "+t.message)})},t.preloadHeadImg=function(t){var e=this;this.headImgMap.hasOwnProperty(t)||(console.log("preloadHeadImg:",t),cc.assetManager.loadRemote(t,{ext:".jpg"},function(o,n){e.headImgMap[t]=new cc.SpriteFrame(n),console.log("preloadHeadImg success:",t)}))},t.setOtherPlayer=function(t,e){var o=this;window.hasOwnProperty("FBInstant")&&this.getPlayersAsync(function(n){o.playerData=n.find(function(t){return t.getID()!=FBInstant.player.getID()}),o.playerData&&(null==t||t(),o.getScore(function(t){var n=t.find(function(t){return t.getPlayer().getID()==o.playerData.getID()});n?(o.otherPlayerData=n,null==e||e()):o.otherPlayerData=null}))})},t.getConnectedPlayersAsync=function(t){window.hasOwnProperty("FBInstant")&&FBInstant.player.getConnectedPlayersAsync().then(function(e){t(e),console.log(e.map(function(t){return{id:t.getID(),name:t.getName()}}))})},t.getPlayersAsync=function(t){window.hasOwnProperty("FBInstant")&&FBInstant.context.getPlayersAsync().then(function(e){t(e),console.log(e.map(function(t){return{id:t.getID(),name:t.getName()}}))})},t.matchPlayerAsync=function(t,e){window.FBInstant?FBInstant.checkCanPlayerMatchAsync().then(function(o){console.error(o),o?FBInstant.matchPlayerAsync(null,!1,!0).then(function(){console.log(FBInstant.context.getID()),null==t||t()}).catch(function(t){null==e||e(),console.log(t)}):null==e||e()}).catch(function(t){null==e||e(),console.log(t)}):t()},t.sendScoreMess=function(){window.hasOwnProperty("FBInstant")&&FBInstant.updateAsync({action:"LEADERBOARD",name:"Test Leaderboard."+FBInstant.context.getID()}).then(function(){return console.log("Share Score")}).catch(function(t){return console.error(t)})},t.sendScoreMessImg=function(t,e,o){if(!window.hasOwnProperty("FBInstant"))return cc.log("\u5206\u4eab\u6d4b\u8bd5"),void(null==e||e());FBInstant.shareAsync({intent:"REQUEST",image:t,text:"Let us play game together",data:{myReplayData:"share"}}).then(function(){null==e||e()}).catch(function(t){console.error(t),null==o||o()})},t.contextChooseAsync=function(t,e){var o=this;window.hasOwnProperty("FBInstant")&&FBInstant.context.chooseAsync().then(function(){null==t||t(),o.logEvent("Challenge_any")}).catch(function(t){null==e||e(),console.log(t)})},t.contextCreateAsync=function(t,e,o){var n=this;if(window.hasOwnProperty("FBInstant"))return this.playerData&&t==this.playerData.getID()?(console.log("\u6311\u6218\u73a9\u5bb6\u662f\u5f53\u524d\u73af\u5883\u7684\u73a9\u5bb6"),this.logEvent("Challenge_friends"),void(null==e||e())):void FBInstant.context.createAsync(t).then(function(){null==e||e(),n.logEvent("Challenge_friendsID")}).catch(function(t){null==o||o(),console.log(t)})},t.postSessionScore=function(t){window.hasOwnProperty("FBInstant")&&FBInstant.postSessionScoreAsync(t)},t.videoAd={},t.interstitialAd={},t.videoAdIsReady={},t.interstitialAdIsReady={},t.contextID=null,t.playerData=null,t.otherPlayerData=null,t.headImgMap={},t.arrRankData=null,t.cdTime=30,t.adDisTime=30,t.isSolo=!0,t}();o.default=c,cc._RF.pop()},{"../Core/App":"App"}],GameManage:[function(t,e,o){"use strict";cc._RF.push(e,"51151gipvBDnq2pnkDtD6NZ","GameManage");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Game/cubePile"),r=t("../Game/cubManage"),c=t("../Game/gameScene"),s=t("../Game/guideData"),l=t("../SDK/FacebookIG"),u=t("./App"),h=t("./AudioManage"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cubConfig=[[],[cc.v2(0,0)],[cc.v2(0,-.5),cc.v2(0,.5)],[cc.v2(-.5,0),cc.v2(.5,0)],[cc.v2(0,-1),cc.v2(0,0),cc.v2(0,1)],[cc.v2(-1,0),cc.v2(0,0),cc.v2(1,0)],[cc.v2(0,-1.5),cc.v2(0,-.5),cc.v2(0,.5),cc.v2(0,1.5)],[cc.v2(-.5,0),cc.v2(.5,0),cc.v2(1.5,0),cc.v2(-1.5,0)],[cc.v2(-.5,.5),cc.v2(.5,-.5),cc.v2(.5,.5)],[cc.v2(-.5,-.5),cc.v2(-.5,.5),cc.v2(.5,.5)],[cc.v2(-.5,-.5),cc.v2(.5,-.5),cc.v2(.5,.5)],[cc.v2(-.5,-.5),cc.v2(-.5,.5),cc.v2(.5,-.5)],[cc.v2(-.5,-.5),cc.v2(-.5,.5),cc.v2(.5,-.5),cc.v2(.5,.5)],[cc.v2(-.5,-1),cc.v2(-.5,0),cc.v2(-.5,1),cc.v2(.5,-1),cc.v2(.5,0),cc.v2(.5,1)],[cc.v2(-1,-.5),cc.v2(-1,.5),cc.v2(0,-.5),cc.v2(0,.5),cc.v2(1,-.5),cc.v2(1,.5)],[cc.v2(-1,.5),cc.v2(0,-.5),cc.v2(0,.5),cc.v2(1,-.5)],[cc.v2(-.5,-1),cc.v2(-.5,0),cc.v2(.5,0),cc.v2(.5,1)],[cc.v2(-.5,0),cc.v2(-.5,1),cc.v2(.5,-1),cc.v2(.5,0)],[cc.v2(-1,-.5),cc.v2(0,-.5),cc.v2(0,.5),cc.v2(1,.5)],[cc.v2(-1,-.5),cc.v2(0,-.5),cc.v2(1,-.5),cc.v2(1,.5)],[cc.v2(-1,-.5),cc.v2(-1,.5),cc.v2(0,-.5),cc.v2(1,-.5)],[cc.v2(-.5,-1),cc.v2(-.5,0),cc.v2(-.5,1),cc.v2(.5,1)],[cc.v2(-.5,1),cc.v2(.5,-1),cc.v2(.5,0),cc.v2(.5,1)],[cc.v2(-.5,0),cc.v2(.5,-1),cc.v2(.5,0),cc.v2(.5,1)],[cc.v2(-.5,-1),cc.v2(-.5,0),cc.v2(-.5,1),cc.v2(.5,0)],[cc.v2(-1,.5),cc.v2(0,-.5),cc.v2(0,.5),cc.v2(1,.5)],[cc.v2(-1,-.5),cc.v2(0,-.5),cc.v2(0,.5),cc.v2(1,-.5)],[],[],[],[],[cc.v2(-1,-.5),cc.v2(-1,.5),cc.v2(0,.5),cc.v2(1,-.5),cc.v2(1,.5)],[cc.v2(-1,-.5),cc.v2(-1,.5),cc.v2(0,-.5),cc.v2(1,-.5),cc.v2(1,.5)],[cc.v2(-.5,-1),cc.v2(-.5,1),cc.v2(.5,-1),cc.v2(.5,0),cc.v2(.5,1)],[cc.v2(-.5,-1),cc.v2(-.5,0),cc.v2(-.5,1),cc.v2(.5,-1),cc.v2(.5,1)],[cc.v2(-1,-1),cc.v2(-1,0),cc.v2(-1,1),cc.v2(0,-1),cc.v2(0,0),cc.v2(0,1),cc.v2(1,-1),cc.v2(1,0),cc.v2(1,1)],[cc.v2(0,0),cc.v2(-1,0),cc.v2(1,0),cc.v2(0,1),cc.v2(0,-1)],[cc.v2(0,0),cc.v2(1,0),cc.v2(-1,0),cc.v2(-2,0),cc.v2(2,0)],[cc.v2(0,0),cc.v2(0,1),cc.v2(0,-1),cc.v2(0,2),cc.v2(0,-2)],[cc.v2(-1,-1),cc.v2(-1,0),cc.v2(-1,1),cc.v2(0,-1),cc.v2(1,-1)],[cc.v2(-1,-1),cc.v2(0,-1),cc.v2(1,-1),cc.v2(1,0),cc.v2(1,1)],[cc.v2(-1,1),cc.v2(0,1),cc.v2(1,-1),cc.v2(1,0),cc.v2(1,1)],[cc.v2(-1,-1),cc.v2(-1,0),cc.v2(-1,1),cc.v2(0,1),cc.v2(1,1)],[cc.v2(-1,1),cc.v2(0,-1),cc.v2(0,0),cc.v2(0,1),cc.v2(1,1)],[cc.v2(-1,-1),cc.v2(0,-1),cc.v2(0,0),cc.v2(0,1),cc.v2(1,-1)],[cc.v2(-1,0),cc.v2(0,0),cc.v2(1,-1),cc.v2(1,0),cc.v2(1,1)],[cc.v2(-1,-1),cc.v2(-1,0),cc.v2(-1,1),cc.v2(0,0),cc.v2(1,0)],[cc.v2(-.5,.5),cc.v2(.5,-.5)],[cc.v2(-.5,-.5),cc.v2(.5,.5)],[],[],[],[],[],[],[cc.v2(-1,-1),cc.v2(-1,0),cc.v2(-1,1),cc.v2(0,-1),cc.v2(0,1),cc.v2(1,-1),cc.v2(1,0),cc.v2(1,1)],[cc.v2(-1,1),cc.v2(0,0),cc.v2(1,-1)],[cc.v2(-1,.5),cc.v2(0,.5),cc.v2(1,.5),cc.v2(1,-.5)],[cc.v2(-1,-.5),cc.v2(-1,.5),cc.v2(0,.5),cc.v2(1,.5)],[cc.v2(-.5,-1),cc.v2(.5,1),cc.v2(.5,0),cc.v2(.5,-1)],[cc.v2(-.5,-1),cc.v2(-.5,1),cc.v2(-.5,0),cc.v2(.5,-1)]],e.H=8,e.V=8,e.space=87.5,e.dieDelayTime=3,e.isReliveOpen=!0,e.isBombOpen=!1,e.eliminateCount=0,e.arrPlanOne=[],e.tipColorImg=null,e.isDie=!1,e.guideCanPlace=!1,e.arrHasCub=[],e.lianjiCount=0,e.eliminateSoundIndex=0,e.arrCol=[],e.arrRow=[],e.getScore=0,e.isFall=!1,e.scoreBk=0,e}return a(e,t),e.prototype.init=function(){this.GetCubManage=new r.default,this.AllCubData=new r.AllCubData},e.prototype.onGameExit=function(){u.default.gameData.cubOneMap={},u.default.gameData.cubPileMap=[],this.isDie?(u.default.gameData.scoreNum=0,u.default.gameData.reliveCount=0,u.default.gameData.hadBreak=!1):(this.arrPlanOne.forEach(function(t){t.hasCub&&(u.default.gameData.cubOneMap[t.X]||(u.default.gameData.cubOneMap[t.X]={}),u.default.gameData.cubOneMap[t.X][t.Y]=t.hasCub.img.name)}),u.default.getCom(c.default).bottomCubPileContent.children.forEach(function(t){var e=t.getComponentInChildren(i.default);e&&!e.isDie?u.default.gameData.cubPileMap.push({type:e.type,color:e.colorImg.name}):u.default.gameData.cubPileMap.push(null)})),u.default.LocaloManage.savaData()},e.prototype.checkAndTipCanEliminate=function(){var t=this.getCanEliminate(!0);this.arrPlanOne.forEach(function(t){t.hasCub&&t.hasCub.resetTip()}),t.forEach(function(t){t.hasCub&&t.hasCub.tipCanEliminate()}),this.guideCanPlace=this.eliminateCount>0},e.prototype.checkedAndEliminate=function(t,e){var o=this,n=this.getCanEliminate(!1);this.isFall&&(n.length>=8?this.scheduleOnce(function(){o.fallDown()},1):this.isFall=!1),n.forEach(function(e){var n=t.sub(e.worldP).mag()/1e3;e.hasCub.onEliminate(o.tipColorImg,n),e.hasCub=null});var a=this.getEliminateScore(this.eliminateCount);a>0&&(this.getScore=a,u.default.getCom(c.default).addScore(a),u.default.getCom(c.default).showGuLi()),this.eliminateCount>2&&u.default.getCom(c.default).shake(),this.getIsGuide()&&this.eliminateCount>0&&u.default.getCom(c.default).onGuideOver(),u.default.getCom(c.default).beforeHasCanE=e?this.eliminateCount>0||u.default.getCom(c.default).beforeHasCanE:this.eliminateCount>0},e.prototype.getCanEliminate=function(t){var e={},o={},n=[];for(var a in this.arrCol=[],this.arrRow=[],this.eliminateCount=0,this.arrPlanOne.forEach(function(n){(n.hasCub||t&&n.isTip)&&(e[n.X]||(e[n.X]=[]),e[n.X].push(n),o[n.Y]||(o[n.Y]=[]),o[n.Y].push(n))}),e)(i=e[a]).length>=this.H&&(this.eliminateCount++,this.arrCol.push(Number(a)),n=n.concat(i));for(var a in o){var i;(i=o[a]).length>=this.V&&(this.eliminateCount++,this.arrRow.push(Number(a)),i.forEach(function(t){-1==n.indexOf(t)&&n.push(t)}))}return n},e.prototype.getGuLiStr=function(t){switch(t){case 2:return"good";case 3:return"great";case 4:return"perfect";case 5:return"Excellent";default:return"unbelievable"}},e.prototype.getEliminateScore=function(t){if(t<=0)return this.lianjiCount=0,0;this.lianjiCount++;var e=u.default.GameManage.lianjiCount<10?"0"+u.default.GameManage.lianjiCount:u.default.GameManage.lianjiCount;0!=u.default.gameData.guideSetp&&l.default.logEvent("combo"+e),this.lianjiCount=this.lianjiCount>9?9:this.lianjiCount,this.eliminateSoundIndex=this.lianjiCount;var o=Math.pow(2,this.lianjiCount-1),n=(1==t?20:50*Math.pow(2,t-2))*o;return 0!=u.default.gameData.guideSetp&&l.default.logEvent("score_"+this.getNumAs5Digits(n)),n},e.prototype.setGuideData=function(){var t;t=(new s.guideData).getGuideData2(),u.default.gameData.cubOneMap=t.cubOneMap,u.default.gameData.cubPileMap=t.cubPileMap,u.default.gameData.scoreNum=0,u.default.gameData.bestScore=0},e.prototype.getIsGuide=function(){return u.default.gameData.guideSetp<1},e.prototype.showNoADs=function(){u.default.noADsNode.active||(u.default.noADsNode.active=!0,u.default.noADsNode.scale=0,u.default.noADsNode.opacity=255,cc.tween(u.default.noADsNode).to(.2,{scale:1}).start(),cc.tween(u.default.noADsNode).delay(.7).to(.3,{opacity:0}).call(function(){u.default.noADsNode.active=!1,u.default.noADsNode.scale=0,u.default.noADsNode.opacity=0}).union().start())},e.prototype.fallDown=function(){var t=this;u.default.AudioManage.playSound(h.MusicEnum.drop),u.default.getCom(c.default).shake();for(var e=0;e<this.arrPlanOne.length;e++)if(this.arrPlanOne[e].hasCub){this.tipColorImg=this.arrPlanOne[e].hasCub.sprite.spriteFrame;break}this.arrPlanOne.forEach(function(t){t.tipNode.active&&(t.tipNode.active=!1)});var o=0;for(e=0;e<8;e++)for(var n=0,a=8*e;a<8*e+8;a++)if(this.arrPlanOne[a].hasCub){if(n>0){this.arrPlanOne[a-n].hasCub=this.arrPlanOne[a].hasCub,this.arrPlanOne[a].hasCub=null;var i=-this.space*n;cc.tween(this.arrPlanOne[a-n].hasCub.node).delay(.05).by(.05*n,{position:cc.v3(0,i)}).start()}}else o=(n+=1)>o?n:o;this.scheduleOnce(function(){t.checkedAndEliminate(t.arrPlanOne[0].worldP,!0),u.default.getCom(c.default).checkDie()},.05*o+.05)},e.prototype.convertNum=function(t){var e=[];return e[0]=t%10,e[1]=Math.floor(t%100/10),e[2]=Math.floor(t%1e3/100),e[3]=Math.floor(t%1e4/1e3),e[4]=Math.floor(t%1e5/1e4),e[5]=Math.floor(t%1e6/1e5),e},e.prototype.getNumAs5Digits=function(t){for(var e=this.convertNum(t),o="",n=4;n>=0;n--)o+=e[n];return o},e}(cc.Component);o.default=d,cc._RF.pop()},{"../Game/cubManage":"cubManage","../Game/cubePile":"cubePile","../Game/gameScene":"gameScene","../Game/guideData":"guideData","../SDK/FacebookIG":"FacebookIG","./App":"App","./AudioManage":"AudioManage"}],GuideUI:[function(t,e,o){"use strict";cc._RF.push(e,"b226aX516RD5KoEceTLfYAh","GuideUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideData=void 0;var r=t("../Core/BaseUI"),c=cc._decorator,s=c.ccclass,l=c.property;o.GuideData=function(){this.fromWordP=null,this.toWordP=null};var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hand=null,e}return a(e,t),e.prototype.onEnable=function(){var t=this;this.hand.active=!1,this.scheduleOnce(function(){t.guideAnction()})},e.prototype.guideAnction=function(){var t=this;this.hand.active=!0;var e=this.node.convertToNodeSpaceAR(this.args.fromWordP),o=this.node.convertToNodeSpaceAR(this.args.toWordP);this.hand.position=e,cc.tween(this.hand).call(function(){t.hand.scale=1.1}).to(.8,{scale:1.4,position:o},{easing:cc.easing.sineIn}).to(.4,{scale:1.1},{easing:cc.easing.sineIn}).delay(.3).call(function(){t.hand.position=e,t.hand.scale=0}).delay(.3).union().repeatForever().start()},e.prototype.hide=function(){cc.Tween.stopAllByTarget(this.hand),cc.tween(this.hand).to(.1,{opacity:0}).start()},e.prototype.show=function(){cc.Tween.stopAllByTarget(this.hand),cc.tween(this.hand).to(.1,{opacity:255}).start(),this.guideAnction()},i([l(cc.Node)],e.prototype,"hand",void 0),i([s],e)}(r.BaseUI);o.default=u,cc._RF.pop()},{"../Core/BaseUI":"BaseUI"}],Guide:[function(t,e,o){"use strict";cc._RF.push(e,"5b2b43VF2tMX6WmGgB2khN6","Guide");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideData=void 0;var r=t("../Core/App"),c=t("../Core/BaseUI"),s=cc._decorator,l=s.ccclass,u=s.property;o.GuideData=function(){this.target=null,this.isShowBg=null,this.closeCb=null,this.otherNode=null,this.delayTime=null};var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shouZhi=null,e.instanceContent=null,e.bg=null,e.beforeParent=null,e.otherBeforeParent=null,e}return a(e,t),e.prototype.onEnable=function(){var t=this;this.node.opacity=0,this.scheduleOnce(function(){t.node.opacity=255,t.args.delayTime?(t.node.opacity=0,t.scheduleOnce(function(){t.node.opacity=255,t.refreshGuide()},t.args.delayTime)):t.refreshGuide()})},e.prototype.refreshGuide=function(){this.bg.opacity=this.args.isShowBg?150:0;var t=this.instanceContent.convertToNodeSpaceAR(this.args.target.convertToWorldSpaceAR(cc.v3()));if(this.beforeParent=this.args.target.parent,this.args.target.setParent(this.instanceContent),this.args.target.position=t,this.shouZhi.position=t,this.args.otherNode){this.otherBeforeParent=this.args.otherNode.parent;var e=this.instanceContent.convertToNodeSpaceAR(this.args.otherNode.convertToWorldSpaceAR(cc.v3()));this.args.otherNode.setParent(this.instanceContent),this.args.otherNode.position=e}var o=this.args.target.getComponent(cc.Button)||this.args.target.getComponentInChildren(cc.Button),n=new cc.Component.EventHandler;n.handler="OnInstanceClick",n.component="newGuide",n.target=this.node,o.clickEvents.push(n)},e.prototype.OnInstanceClick=function(){var t,e;(this.args.target.getComponent(cc.Button)||this.args.target.getComponentInChildren(cc.Button)).clickEvents.pop();var o=this.beforeParent.convertToNodeSpaceAR(this.args.target.convertToWorldSpaceAR(cc.v3()));if(this.args.target.setParent(this.beforeParent),this.args.target.position=o,this.args.otherNode){var n=this.otherBeforeParent.convertToNodeSpaceAR(this.args.otherNode.convertToWorldSpaceAR(cc.v3()));this.args.otherNode.setParent(this.otherBeforeParent),this.args.otherNode.position=n}null===(e=(t=this.args).closeCb)||void 0===e||e.call(t),r.default.UIManage.hidUINode(this.node)},i([u(cc.Node)],e.prototype,"shouZhi",void 0),i([u(cc.Node)],e.prototype,"instanceContent",void 0),i([u(cc.Node)],e.prototype,"bg",void 0),i([l],e)}(c.BaseUI);o.default=h,cc._RF.pop()},{"../Core/App":"App","../Core/BaseUI":"BaseUI"}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"fc1faKDBVFNMI/16Z/E/dqV","Loading");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Loading=void 0;var r=t("../Core/App"),c=t("../Core/AudioManage"),s=t("../Core/UIManage"),l=t("../SDK/FacebookIG"),u=cc._decorator,h=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrDoor=[],e.arrLogo=[],e.shuye=null,e.arrOpenParticle=[],e.config=["cubImg","font","music","share","Prefab"],e}return a(e,t),e.prototype.start=function(){0==r.default.gameData.enterStep&&(l.default.logEvent("enterGame"),r.default.gameData.enterStep=1),l.default.createShortcutAsync(),this.preLoad(),this.openDoor()},e.prototype.openDoor=function(){r.default.AudioManage.playSound(c.MusicEnum.door),this.arrDoor.forEach(function(t){var e=t.x/Math.abs(t.x);cc.tween(t).delay(.3).by(.7,{position:cc.v3(e*t.width,0,0)},cc.easeIn(2)).start()}),this.scheduleOnce(this.showLogo,1.1)},e.prototype.showLogo=function(){var t=this;this.arrLogo.forEach(function(e){cc.tween(e).by(.5,{position:cc.v3(0,-e.y,0)},cc.easeIn(4)).call(function(){t.arrOpenParticle[0].resetSystem(),t.arrOpenParticle[1].resetSystem()}).delay(1.6).call(function(){r.default.UIManage.showUI(s.UIEnum.menuUI),t.shuye.clearTrack(0),t.node.destroy()}).start()})},e.prototype.hid=function(){},e.prototype.preLoad=function(){for(var t=0;t<this.config.length;t++)cc.resources.loadDir(this.config[t],function(){},function(t){t&&console.error(t)})},i([d(cc.Node)],e.prototype,"arrDoor",void 0),i([d(cc.Node)],e.prototype,"arrLogo",void 0),i([d(sp.Skeleton)],e.prototype,"shuye",void 0),i([d(cc.ParticleSystem)],e.prototype,"arrOpenParticle",void 0),i([h],e)}(cc.Component);o.Loading=p,cc._RF.pop()},{"../Core/App":"App","../Core/AudioManage":"AudioManage","../Core/UIManage":"UIManage","../SDK/FacebookIG":"FacebookIG"}],LocalManage:[function(t,e,o){"use strict";cc._RF.push(e,"0f800uHGIhEJo5tfVDzoxxx","LocalManage"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameData=void 0;var n=function(){this.playerRankData={},this.isMusicOn=!0,this.isSoundOn=!0,this.isRemoveAd=!0,this.isVibart=!1,this.isShock=!0,this.gameTime=0,this.scoreNum=0,this.cubOneMap={},this.cubPileMap=[],this.bestScore=0,this.reliveCount=0,this.hadBreak=!1,this.guideSetp=0,this.playTime=0,this.playNum=0,this.enterStep=0,this.useFallNum=0,this.useRefreshNum=0};o.GameData=n;var a=function(){function t(){this.gameData=null,this.dataKey="baoShiELS",this.init()}return t.prototype.init=function(){var t;try{t=this.getItem(this.dataKey)}catch(r){}var e={};t&&(e=JSON.parse(t));for(var o=new n,a=Object.keys(o),i=0;i<a.length;i++)e.hasOwnProperty(a[i])||(e[a[i]]=o[a[i]]);this.gameData=e,e.session&&(this.gameData.playNum+=e.session)},t.prototype.savaData=function(){this.setItem(this.gameData)},t.prototype.restData=function(){this.gameData=new n},t.prototype.setItem=function(t){cc.sys.localStorage.setItem(this.dataKey,JSON.stringify(t))},t.prototype.getItem=function(t){return cc.sys.localStorage.getItem(t)},t}();o.default=a,cc._RF.pop()},{}],LoopScrollView:[function(t,e,o){"use strict";cc._RF.push(e,"e1701EmjBNPXpNGxVCgk5hM","LoopScrollView");var n,a,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.GRIDHORIZONTAL=3]="GRIDHORIZONTAL",t[t.GRIDVERTICAL=4]="GRIDVERTICAL"}(a||(a={}));var c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childSamplePrefab=null,e.childSampleNode=null,e._horizontal=!1,e._vertical=!0,e._type=a.HORIZONTAL,e._HOrVNumber=1,e._left=0,e._right=0,e._top=0,e._buttom=0,e._spacingX=0,e._spacingY=0,e.data=[],e._toRefresh=!1,e.positionList=null,e.childCount=null,e.viewMax=null,e.viewMin=null,e.lastPosition=null,e.childAnchorLeft=null,e.childAnchorTop=null,e.childNode=null,e.isHorizontal=null,e.showFunction=null,e}return i(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._changePaddingType()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HOrVNumber",{get:function(){return this._HOrVNumber},set:function(t){this._HOrVNumber=t,this._changePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,this._changePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,this._changePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},set:function(t){this._top=t,this._changePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttom",{get:function(){return this._buttom},set:function(t){this._buttom=t,this._changePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacingX",{get:function(){return this._spacingX},set:function(t){this._spacingX=t,this._changePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacingY",{get:function(){return this._spacingY},set:function(t){this._spacingY=t,this._changePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshButton",{get:function(){return this._toRefresh},set:function(){this._toRefresh=!1,this._changePaddingType()},enumerable:!1,configurable:!0}),e.prototype._changePaddingType=function(){var t=this;this.data.length=this.content.childrenCount;var e=[],o=[];switch(this._type){case a.HORIZONTAL:o=["top","buttom","spacingY","HOrVNumber"],e=["left","right","spacingX"],this.horizontal=!0;break;case a.VERTICAL:o=["left","right","spacingX","HOrVNumber"],e=["top","buttom","spacingY"],this.horizontal=!1;break;case a.GRIDHORIZONTAL:o=[],e=["left","right","top","buttom","spacingX","spacingY","HOrVNumber"],this.horizontal=!0;break;case a.GRIDVERTICAL:o=[],e=["left","right","top","buttom","spacingX","spacingY","HOrVNumber"],this.horizontal=!1}e.forEach(function(e){cc.Class.attr(t,e,{visible:!0})}),o.forEach(function(e){cc.Class.attr(t,e,{visible:!1})}),this._changePadding()},e.prototype._changePadding=function(){var t=this;this._init(),this.content.children.forEach(function(e,o){e.setPosition(t.positionList[o])})},e.prototype.init=function(t,e){this.data=this.changeDataToArray(t),this.showFunction=e,this._init(),this.addChildToContent()},e.prototype.refreshData=function(t){this.stopAutoScroll(),this.scrollToTopLeft(),this.data=this.changeDataToArray(t);var e=this.childCount;this._init(),e!=this.childCount&&this.addChildToContent()},e.prototype.onlyRefreshShow=function(t){this.data=this.changeDataToArray(t);for(var e=this.content.children,o=0,n=e.length;o<n;o++){var a=this.data[e[o].setIndex];this.showFunction(e[o],a)}},e.prototype.scrollIndexToPercentage=function(t,e,o,n,a,i){var r=this;if(void 0===e&&(e=0),void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===i&&(i=function(){}),!this.positionList.length||t<0||t>=this.positionList.length)cc.error("%s \u8bf7\u68c0\u6d4b\u6570\u636e\u662f\u5426\u5408\u6cd5\u3002index:%s",this.name,t);else{this.stopAutoScroll();var c,s,l,u=this.isHorizontal?this.getMaxScrollOffset().x:this.getMaxScrollOffset().y,h=Math.abs(this.isHorizontal?this.positionList[t].x:this.positionList[t].y);this.isHorizontal?((l=((s=o>.5?this.node.width*o-(this.childNode.width-this.childAnchorLeft)*(2*o-1):this.node.width*o-this.childAnchorLeft*(2*o-1))-(this.childAnchorLeft+this.spacingX))%(this.childNode.width+this.spacingX))>this.childNode.width/2&&(l=-this.childNode.width-this.spacingX+l),c=h-s+(n?l:0)):((l=((s=o>.5?this.node.height*o-(this.childNode.height-this.childAnchorTop)*(2*o-1):this.node.height*o-this.childAnchorTop*(2*o-1))-(this.childAnchorTop+this.spacingY))%(this.childNode.height+this.spacingY))>this.childNode.height/2&&(l=-this.childNode.height-this.spacingY+l),c=h-s+(n?l:0)),c=Math.max(0,c),c=Math.min(u,c);var d=this.isHorizontal?cc.v2(c,0):cc.v2(0,c);this.scrollToOffset(d,e,a),this.scheduleOnce(function(){r.refreshPosition(),i()},e)}},e.prototype.getNodeInView=function(){var t=[];if(this.isHorizontal)for(var e=this.content.x,o=0;o<this.childCount;o++){var n=(c=this.content.children[o]).x+e,a=n+this.childAnchorLeft<=this.viewMin,i=n-(this.childNode.width-this.childAnchorLeft)>=this.viewMax;a||i||t.push(c)}else{var r=this.content.y;for(o=0;o<this.childCount;o++){var c,s=(c=this.content.children[o]).y+r;a=s+this.childAnchorTop<=this.viewMin,i=s-(this.childNode.height-this.childAnchorTop)>=this.viewMax,a||i||t.push(c)}}return t.sort(function(t,e){return t.setIndex-e.setIndex}),t},e.prototype.start=function(){var t=this;this.node.on("scrolling",function(){t.onScroll()})},e.prototype._init=function(){this.childSamplePrefab?this.childNode=cc.instantiate(this.childSamplePrefab):this.childNode=this.childSampleNode,this.isHorizontal=this.type==a.HORIZONTAL||this.type==a.GRIDHORIZONTAL,this.isHorizontal?this.content.anchorX=0:this.content.anchorY=1,this.childAnchorLeft=this.childNode.width*this.childNode.anchorX,this.childAnchorTop=this.childNode.height*this.childNode.anchorY,this.initPositionList()},e.prototype.changeDataToArray=function(t){var e=[];if(Array.isArray(t))e=t;else for(var o in t)e.push(t[o]);return e},e.prototype.initPositionList=function(){this.positionList=[];var t=cc.v2(0,0);switch(this._type){case a.HORIZONTAL:this.viewMax=this.node.width*(1-this.node.anchorX),this.viewMin=-this.node.width*this.node.anchorX,this.childCount=Math.min(Math.ceil(this.node.width/(this.childNode.width+this.spacingX))+1,this.data.length),this.content.width=(this.childNode.width+this.spacingX)*this.data.length-this.spacingX+this.left+this.right,this.content.height=this.childNode.height,t=this.getContentOffset;for(var e=0,o=this.data.length;e<o;e++)this.positionList.push(cc.v2(this.childAnchorLeft+(this.childNode.width+this._spacingX)*e+this.left-t.x,t.y-this.childAnchorTop));break;case a.VERTICAL:for(this.viewMax=this.node.height*(1-this.node.anchorY),this.viewMin=-this.node.height*this.node.anchorY,this.childCount=Math.min(Math.ceil(this.node.height/(this.childNode.height+this.spacingY))+1,this.data.length),this.content.width=this.childNode.width,this.content.height=(this.childNode.height+this.spacingY)*this.data.length-this.spacingY+this.top+this.buttom,t=this.getContentOffset,e=0,o=this.data.length;e<o;e++)this.positionList.push(cc.v2(this.childAnchorLeft-t.x,-(this.childAnchorTop+(this.childNode.height+this._spacingY)*e+this.top)+t.y));break;case a.GRIDHORIZONTAL:this.viewMax=this.node.width*(1-this.node.anchorX),this.viewMin=-this.node.width*this.node.anchorX,this.childCount=Math.min((Math.ceil(this.node.width/(this.childNode.width+this.spacingX))+1)*this.HOrVNumber,this.data.length),this.content.width=(this.childNode.width+this.spacingX)*Math.ceil(this.data.length/this.HOrVNumber)-this.spacingX+this.left+this.right,this.content.height=(this.childNode.height+this.spacingY)*this.HOrVNumber+this.top+this.buttom-this.spacingY,t=this.getContentOffset;var n=0;for(e=0,o=this.data.length;e<o;e++){var i=this.childAnchorLeft+(this.childNode.width+this._spacingX)*Math.floor(e/this.HOrVNumber)+this.left-t.x,r=-(this.childAnchorTop+(this.childNode.height+this._spacingY)*n+this.top-t.y);this.positionList.push(cc.v2(i,r)),n++,n%=this.HOrVNumber}break;case a.GRIDVERTICAL:this.viewMax=this.node.height*(1-this.node.anchorY),this.viewMin=-this.node.height*this.node.anchorY,this.childCount=Math.min((Math.ceil(this.node.height/(this.childNode.height+this.spacingY))+1)*this.HOrVNumber,this.data.length),this.content.width=(this.childNode.width+this.spacingX)*this.HOrVNumber+this.left+this.right-this.spacingX,this.content.height=(this.childNode.height+this.spacingY)*Math.ceil(this.data.length/this.HOrVNumber)-this.spacingY+this._top+this.buttom,t=this.getContentOffset;var c=0;for(e=0,o=this.data.length;e<o;e++)i=this.childAnchorLeft+(this.childNode.width+this._spacingX)*c+this.left-t.x,r=-(this.childAnchorTop+(this.childNode.height+this._spacingY)*Math.floor(e/this.HOrVNumber)+this.top-t.y),this.positionList.push(cc.v2(i,r)),c++,c%=this.HOrVNumber}},Object.defineProperty(e.prototype,"getContentOffset",{get:function(){return cc.v2(this.content.width*this.content.anchorX,this.content.height*(1-this.content.anchorY))},enumerable:!1,configurable:!0}),e.prototype.onScroll=function(){switch(this.type){case a.HORIZONTAL:case a.GRIDHORIZONTAL:this.onScrollH();break;case a.VERTICAL:case a.GRIDVERTICAL:this.onScrollV()}},e.prototype.onScrollH=function(){for(var t=this.content.x,e=0;e<this.childCount;e++){var o=this.content.children[e],n=o.x+t,a=void 0;this.lastPosition>t?n+this.childAnchorLeft<this.viewMin&&(a=o.setIndex+this.childCount)>=0&&a<=this.positionList.length-1&&(o.setIndex=a,o.setPosition(this.positionList[a]),this.showFunction(o,this.data[a])):n-this.childAnchorLeft>this.viewMax&&(a=o.setIndex-this.childCount)>=0&&a<=this.positionList.length-1&&(o.setIndex=a,o.setPosition(this.positionList[a]),this.showFunction(o,this.data[a]))}this.lastPosition=this.content.x},e.prototype.onScrollV=function(){for(var t=this.content.y,e=0;e<this.childCount;e++){var o=this.content.children[e],n=o.y+t,a=void 0;this.lastPosition>t?n+this.childAnchorTop<this.viewMin&&(a=o.setIndex-this.childCount)>=0&&a<=this.positionList.length-1&&(o.setIndex=a,o.setPosition(this.positionList[a]),this.showFunction(o,this.data[a])):n-this.childAnchorTop>this.viewMax&&(a=o.setIndex+this.childCount)>=0&&a<=this.positionList.length-1&&(o.setIndex=a,o.setPosition(this.positionList[a]),this.showFunction(o,this.data[a]))}this.lastPosition=this.content.y},e.prototype._refreshPositionH=function(t){void 0===t&&(t=!0);for(var e=this.content.x,o=!0,n=0;n<this.childCount;n++){var a=this.content.children[n],i=a.x+e,r=void 0;t?i+this.childAnchorLeft<this.viewMin&&(r=a.setIndex+this.childCount)>=0&&r<=this.positionList.length-1&&(a.setIndex=r,a.setPosition(this.positionList[r]),this.showFunction(a,this.data[r]),o=!1):i-this.childAnchorLeft>this.viewMax&&(r=a.setIndex-this.childCount)>=0&&r<=this.positionList.length-1&&(a.setIndex=r,a.setPosition(this.positionList[r]),this.showFunction(a,this.data[r]),o=!1)}o||this._refreshPositionH(t)},e.prototype.refreshPosition=function(){if(this.isHorizontal)for(var t=this.content.x,e=0;e<this.childCount;e++){var o=this.content.children[e].x+t;o+this.childAnchorLeft<this.viewMin?this._refreshPositionH(!0):o-this.childAnchorLeft>this.viewMax&&this._refreshPositionH(!1)}else{var n=this.content.y;for(e=0;e<this.childCount;e++){var a=this.content.children[e].y+n;a+this.childAnchorTop<this.viewMin?this._refreshPositionV(!0):a-this.childAnchorTop>this.viewMax&&this._refreshPositionV(!1)}}},e.prototype._refreshPositionV=function(t){void 0===t&&(t=!0);for(var e=this.content.y,o=!0,n=0;n<this.childCount;n++){var a=this.content.children[n],i=a.y+e,r=void 0;t?i+this.childAnchorTop<this.viewMin&&(r=a.setIndex-this.childCount)>=0&&r<=this.positionList.length-1&&(a.setIndex=r,a.setPosition(this.positionList[r]),this.showFunction(a,this.data[r]),o=!1):i-this.childAnchorTop>this.viewMax&&(r=a.setIndex+this.childCount)>=0&&r<=this.positionList.length-1&&(a.setIndex=r,a.setPosition(this.positionList[r]),this.showFunction(a,this.data[r]),o=!1)}o||this._refreshPositionV(t)},e.prototype.addChildToContent=function(){this.content.removeAllChildren();for(var t=0;t<this.childCount;t++){var e=cc.instantiate(this.childNode);e.setIndex=t,e.setPosition(this.positionList[t]),this.showFunction(e,this.data[t]),this.content.addChild(e)}},r([l({tooltip:"\u5b50\u7c7b\u9884\u5236\uff0c\u4f18\u5148\u9884\u5236",type:cc.Prefab})],e.prototype,"childSamplePrefab",void 0),r([l({tooltip:"\u5b50\u7c7b\u8282\u70b9\uff0c\u4f18\u5148\u9884\u5236",type:cc.Node})],e.prototype,"childSampleNode",void 0),r([l({tooltip:"\u662f\u5426\u662f\u6c34\u5e73\u6eda\u52a8"}||cc.Boolean)],e.prototype,"_horizontal",void 0),r([l({tooltip:"\u6eda\u52a8\u65b9\u5411\u7531\u6eda\u52a8\u7c7b\u578b\u51b3\u5b9a,\u8bf7\u4fee\u6539Type",readonly:!0,override:!0}),l({tooltip:"\u662f\u5426\u662f\u5782\u76f4\u6eda\u52a8"}||cc.Boolean)],e.prototype,"_vertical",void 0),r([l({tooltip:"\u6eda\u52a8\u65b9\u5411\u7531\u6eda\u52a8\u7c7b\u578b\u51b3\u5b9a,\u8bf7\u4fee\u6539Type",readonly:!0,override:!0}),l({visible:!1})],e.prototype,"_type",void 0),r([l({tooltip:"\u5e03\u5c40\u6a21\u5f0f",type:cc.Enum(a)})],e.prototype,"type",null),r([l({visible:!1})],e.prototype,"_HOrVNumber",void 0),r([l({tooltip:"\u6a2a\u6570\u6216\u8005\u5217\u6570,\u9ed8\u8ba4\u4e3a2",visible:!1,range:[1,99,1]})],e.prototype,"HOrVNumber",null),r([l({visible:!1})],e.prototype,"_left",void 0),r([l({tooltip:"padding left",visible:!1})],e.prototype,"left",null),r([l({visible:!1})],e.prototype,"_right",void 0),r([l({tooltip:"padding right",visible:!1})],e.prototype,"right",null),r([l({visible:!1})],e.prototype,"_top",void 0),r([l({tooltip:"padding top",visible:!1})],e.prototype,"top",null),r([l({visible:!1})],e.prototype,"_buttom",void 0),r([l({tooltip:"padding buttom",visible:!1})],e.prototype,"buttom",null),r([l({visible:!1})],e.prototype,"_spacingX",void 0),r([l({tooltip:"spacing X",visible:!1})],e.prototype,"spacingX",null),r([l({visible:!1})],e.prototype,"_spacingY",void 0),r([l({tooltip:"spacing Y",visible:!1})],e.prototype,"spacingY",null),r([l({serializable:!1,visible:!1})],e.prototype,"_toRefresh",void 0),r([l({tooltip:"\u5237\u65b0\u673a\u5236\uff0c\u540e\u7eed\u4f18\u5316\u3002##\u7b2c\u4e00\u6b21\u6253\u5f00\uff0c\u6dfb\u52a0\u5b50\u7c7b\u7b49\u6d4b\u8bd5\u90fd\u9700\u8981\u70b9\u51fb\u8fdb\u884c\u5237\u65b0\uff01\uff01",displayName:"\u5237\u65b0\u6309\u94ae\uff1a"})],e.prototype,"refreshButton",null),r([s],e)}(cc.ScrollView);o.default=u,cc._RF.pop()},{}],MenuUI:[function(t,e,o){"use strict";cc._RF.push(e,"323c0kpUApH66WKx0EudrG/","MenuUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/BaseAnction"),s=t("../Core/UIManage"),l=t("../Game/gameScene"),u=cc._decorator,h=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.best=null,e.arrLiuGuang=[],e}return a(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){var t=this;this.initScore(this.best,r.default.gameData.bestScore),this.node.opacity=0,cc.tween(this.node).to(.3,{opacity:255}).call(function(){t.unschedule(t.showLiuGuang),t.showLiuGuang(),t.schedule(t.showLiuGuang,3)}).start()},e.prototype.initScore=function(t,e){var o=r.default.GameManage.convertNum(e);t.getChildByName("unit").y=40.4+80.8*o[0],t.getChildByName("decade").y=40.4+80.8*o[1],t.getChildByName("hundred").y=40.4+80.8*o[2],t.getChildByName("thousand").y=40.4+80.8*o[3],t.getChildByName("tenThousands").y=40.4+80.8*o[4],t.getChildByName("hundredThousands").y=40.4+80.8*o[5]},e.prototype.onClick=function(t){switch(t){case"play":r.default.GameManage.isDie&&r.default.getCom(l.default).restart(),r.default.UIManage.showUI(s.UIEnum.gameScene),this.node.active=!1;break;case"btnSet":r.default.UIManage.showUI(s.UIEnum.setUI)}},e.prototype.showLiuGuang=function(){var t=this;this.arrLiuGuang[0].x=-290,this.arrLiuGuang[1].x=250,cc.tween(this.arrLiuGuang[0]).to(.3,{position:cc.v3(290,this.arrLiuGuang[0].y)}).delay(.1).call(function(){cc.tween(t.arrLiuGuang[1]).to(.3,{position:cc.v3(-280,t.arrLiuGuang[1].y)}).start()}).start()},i([d(cc.Node)],e.prototype,"best",void 0),i([d(cc.Node)],e.prototype,"arrLiuGuang",void 0),i([h],e)}(c.BaseAnction);o.default=p,cc._RF.pop()},{"../Core/App":"App","../Core/BaseAnction":"BaseAnction","../Core/UIManage":"UIManage","../Game/gameScene":"gameScene"}],MesgUI:[function(t,e,o){"use strict";cc._RF.push(e,"4cdd9ADcqVElbtsf10RhiQc","MesgUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.MesgUI=void 0;var r=t("../Core/App"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipBg=null,e.tipLabel=null,e.initP=null,e}var o;return a(e,t),o=e,e.prototype.onLoad=function(){r.default.registerCom(o,this)},e.prototype.start=function(){this.initP=this.tipBg.position},e.prototype.showTip=function(t){var e=this;this.tipBg.stopAllActions(),this.tipLabel.node.stopAllActions(),this.tipLabel.string=t,this.tipBg.active=!0,this.tipBg.scale=0,this.tipBg.position=this.initP,this.tipBg.opacity=255,this.tipBg.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut),cc.delayTime(.5),cc.callFunc(function(){e.tipLabel.node.runAction(cc.fadeTo(.3,50))}),cc.moveBy(.3,cc.v2(0,100)).easing(cc.easeSineOut()),cc.callFunc(function(){e.tipBg.active=!1})))},i([l(cc.Node)],e.prototype,"tipBg",void 0),i([l(cc.Label)],e.prototype,"tipLabel",void 0),o=i([s],e)}(cc.Component);o.MesgUI=u,cc._RF.pop()},{"../Core/App":"App"}],PoolManage:[function(t,e,o){"use strict";cc._RF.push(e,"e042fmyI3lIh4EKuPpDGeax","PoolManage"),Object.defineProperty(o,"__esModule",{value:!0}),o.PoolManage=void 0;var n=function(){this.pool=null,this.resItem=null,this.pool=new cc.NodePool},a=function(){function t(){this.poolMap={}}return t.prototype.get=function(t,e){return void 0===e&&(e="mapPrefab/prefab/"),this.getPrefab(e,t)},t.prototype.put=function(t){var e=t.name;this.poolMap[e].pool.put(t)},t.prototype.clear=function(t){this.poolMap[t].pool.clear()},t.prototype.getSync=function(){},t.prototype.addPrefab=function(t,e){this.poolMap.hasOwnProperty(t)||(this.poolMap[t]=new n),this.poolMap[t].resItem||(this.poolMap[t].resItem=e)},t.prototype.getPrefab=function(t,e){var o=this;return new Promise(function(a){if(o.poolMap.hasOwnProperty(e)||(o.poolMap[e]=new n),o.poolMap[e].pool.size()>0)a(o.poolMap[e].pool.get());else if(o.poolMap[e].resItem){var i=cc.instantiate(o.poolMap[e].resItem);a(i)}else cc.loader.loadRes(t+e,cc.Prefab,function(t,n){if(t)console.log(t);else{n.name=e,o.poolMap[e].resItem=n;var i=cc.instantiate(n);a(i)}})})},t}();o.PoolManage=a,cc._RF.pop()},{}],RankPkUI:[function(t,e,o){"use strict";cc._RF.push(e,"7d74cMxqapAp68trPb+J5SY","RankPkUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/BaseAnction"),s=t("../Core/UIManage"),l=t("../Game/pkItem"),u=t("../SDK/FacebookIG"),h=cc._decorator,d=h.ccclass,p=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrItem=[],e.arrTitleSpf=[],e.title=null,e.jiePingCamera=null,e.firstPosY=null,e.secondPosY=null,e}return a(e,t),e.prototype.onEnable=function(){u.default.setScore(r.default.gameData.scoreNum),this.firstPosY||(this.firstPosY=this.arrItem[0].y),this.secondPosY||(this.secondPosY=this.arrItem[1].y),this.arrItem.forEach(function(t){t.stopAllActions(),t.scale=1}),this.arrItem[0].y=this.firstPosY,this.arrItem[1].y=this.secondPosY;var t=0,e=null,o=null;u.default.otherPlayerData&&(t=u.default.otherPlayerData.getScore(),e=u.default.otherPlayerData.getPlayer().getPhoto()),window.FBInstant&&(o=FBInstant.player.getPhoto()),t<=r.default.gameData.scoreNum?(this.arrItem[0].getComponent(l.default).refresh(t,1,e),this.arrItem[1].getComponent(l.default).refresh(r.default.gameData.scoreNum,0,o),this.playWinAnction()):(this.arrItem[0].getComponent(l.default).refresh(t,0,e),this.arrItem[1].getComponent(l.default).refresh(r.default.gameData.scoreNum,1,o)),this.title.spriteFrame=t<=r.default.gameData.scoreNum?this.arrTitleSpf[0]:this.arrTitleSpf[1],this.showTitle(t<=r.default.gameData.scoreNum)},e.prototype.shareJiePing=function(){},e.prototype.playWinAnction=function(){this.arrItem[1].scale=3,this.arrItem[1].opacity=0,cc.tween(this.arrItem[1]).delay(.2).parallel(cc.tween(this.arrItem[1]).to(.5,{scale:1},cc.easeBackOut()),cc.tween(this.arrItem[1]).to(.5,{opacity:255})).delay(.1).to(.25,{position:cc.v3(0,this.firstPosY+200)},cc.easeSineIn()).by(.08,{position:cc.v3(0,this.firstPosY-4)},cc.easeSineIn()).to(.2,{position:cc.v3(0,this.firstPosY)},cc.easeBackOut()).start(),this.arrItem[0].scale=.8,this.arrItem[0].opacity=150,cc.tween(this.arrItem[0]).delay(.2).parallel(cc.tween(this.arrItem[1]).to(.5,{scale:1},cc.easeBackOut()),cc.tween(this.arrItem[1]).to(.5,{opacity:255})).delay(.4).to(.3,{position:cc.v3(0,this.secondPosY)},cc.easeBackInOut()).start()},e.prototype.showTitle=function(t){this.title.node.scale=0,cc.tween(this.title.node).delay(t?1.2:.2).to(.5,{scale:1},cc.easeBackOut()).start()},e.prototype.onClick=function(t){var e=this;switch(t){case"btnShare":var o=this,n=function(){u.default.showInsertAd(u.adIDFB.insertID2,function(){o.node.active=!1,r.default.UIManage.showUI(s.UIEnum.resultUI)})};u.default.shareAsync(n,n);break;case"btnSkip":u.default.showInsertAd(u.adIDFB.insertID2,function(){e.node.active=!1,r.default.UIManage.showUI(s.UIEnum.resultUI)})}},i([p(cc.Node)],e.prototype,"arrItem",void 0),i([p(cc.SpriteFrame)],e.prototype,"arrTitleSpf",void 0),i([p(cc.Sprite)],e.prototype,"title",void 0),i([p(cc.Prefab)],e.prototype,"jiePingCamera",void 0),i([d],e)}(c.BaseAnction);o.default=f,cc._RF.pop()},{"../Core/App":"App","../Core/BaseAnction":"BaseAnction","../Core/UIManage":"UIManage","../Game/pkItem":"pkItem","../SDK/FacebookIG":"FacebookIG"}],RankUI:[function(t,e,o){"use strict";cc._RF.push(e,"71f41t2FuBDrK2s35x1a/4n","RankUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/BaseAnction"),s=t("../Game/gameScene"),l=t("../Game/rankItem"),u=t("../SDK/FacebookIG"),h=t("./MenuUI"),d=t("./ResultUI"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.arrLiuGuang=[],e.arrtestData=[{score:5e3,player:{getName:function(){return"aaaaa"},getID:function(){return""},getPhoto:function(){return""}},isSelf:!0},{score:4999,player:{getName:function(){return"bbbbb"},getID:function(){return""},getPhoto:function(){return""}},isSelf:!1},{score:4500,player:{getName:function(){return"ccccc"},getID:function(){return""},getPhoto:function(){return""}},isSelf:!1},{score:4300,player:{getName:function(){return"ddddd"},getID:function(){return""},getPhoto:function(){return""}},isSelf:!1},{score:4200,player:{getName:function(){return"eeeee"},getID:function(){return""},getPhoto:function(){return""}},isSelf:!1},{score:4e3,player:{getName:function(){return"fffff"},getID:function(){return""},getPhoto:function(){return""}},isSelf:!1},{score:3500,player:{getName:function(){return"ggggg"},getID:function(){return""},getPhoto:function(){return""}},isSelf:!1},{score:3e3,player:{getName:function(){return"hhhhh"},getID:function(){return""},getPhoto:function(){return""}},isSelf:!1}],e}return a(e,t),e.prototype.onEnable=function(){var e=this;t.prototype.onEnable.call(this),this.unschedule(this.showLiuGuang),this.showLiuGuang(),this.schedule(this.showLiuGuang,3),window.FBInstant?(this.node.getChildByName("jiazaiMask").active=!0,this.content.active=!1,u.default.getRankData(function(t){console.log("get RankData:",t),e.refreshRank(t)})):this.refreshRank(this.arrtestData)},e.prototype.refreshRank=function(t){this.node.getChildByName("jiazaiMask").active=!1,this.content.active=!0;for(var e=0;e<t.length;e++){var o=this.content.children[e];if(!o){var n=cc.instantiate(this.content.children[0]);n.setParent(this.content),o=n}o.active=!0,o.getComponent(l.default).refresh(e,t[e])}for(e=t.length;e<this.content.children.length;e++)this.content.children[e].active=!1},e.prototype.onPlay=function(){this.node.active=!1,r.default.hasCom(h.default)&&(r.default.getCom(h.default).node.active=!1),r.default.hasCom(d.default)&&(r.default.getCom(d.default).node.active=!1),r.default.gameData.cubOneMap={},r.default.gameData.cubPileMap=[],r.default.getCom(s.default).restart()},e.prototype.showLiuGuang=function(){var t=this;this.arrLiuGuang[0].x=-290,this.arrLiuGuang[1].x=250,cc.tween(this.arrLiuGuang[0]).to(.3,{position:cc.v3(290,this.arrLiuGuang[0].y)}).delay(.1).call(function(){cc.tween(t.arrLiuGuang[1]).to(.3,{position:cc.v3(-280,t.arrLiuGuang[1].y)}).start()}).start()},e.prototype.start=function(){this.node.zIndex=2},e.prototype.onClick=function(t){switch(t){case"btnBack":this.node.active=!1;break;case"share":u.default.shareAsync()}},i([g(cc.Node)],e.prototype,"content",void 0),i([g(cc.Node)],e.prototype,"arrLiuGuang",void 0),i([f],e)}(c.BaseAnction);o.default=y,cc._RF.pop()},{"../Core/App":"App","../Core/BaseAnction":"BaseAnction","../Game/gameScene":"gameScene","../Game/rankItem":"rankItem","../SDK/FacebookIG":"FacebookIG","./MenuUI":"MenuUI","./ResultUI":"ResultUI"}],ReliveUI:[function(t,e,o){"use strict";cc._RF.push(e,"4a25ee8owFNQLn/81X+ZvA9","ReliveUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/AudioManage"),s=t("../Core/BaseAnction"),l=t("../Game/gameScene"),u=t("../SDK/FacebookIG"),h=cc._decorator,d=h.ccclass,p=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrTimeSpf=[],e.daoTime=null,e.arrLiuGuang=[],e.reliveScheduleFun=null,e}return a(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){r.default.gameData.playNum<=5&&u.default.logEvent("game_ju0000"+r.default.gameData.playNum+"_relive"),r.default.AudioManage.playSound(c.MusicEnum.fuhuo),cc.tween(cc.find("Canvas/shuye")).to(.4,{color:cc.color(155,155,155)}).start(),t.prototype.onEnable.call(this),this.daoTime.spriteFrame=this.arrTimeSpf[5]},e.prototype.onOAOver=function(){this.unschedule(this.showLiuGuang),this.showLiuGuang(),this.schedule(this.showLiuGuang,3),this.daoTimeAnction()},e.prototype.daoTimeAnction=function(){var e=this,o=5;this.reliveScheduleFun=function(){o-=1,e.daoTime.spriteFrame=e.arrTimeSpf[o],r.default.AudioManage.playSound(c.MusicEnum.daojishi),o<=0&&(e.unschedule(e.reliveScheduleFun),t.prototype.doClose.call(e,function(){e.onClose()}),cc.tween(cc.find("Canvas/shuye")).to(.5,{color:cc.color(255,255,255)}).start())},this.schedule(this.reliveScheduleFun,1)},e.prototype.onClick=function(e){var o=this;switch(e){case"continue":this.unschedule(this.reliveScheduleFun),u.default.showVideoAd(u.adIDFB.videoId1,function(e){t.prototype.doClose.call(o,function(){e?r.default.getCom(l.default).relive():o.onClose()}),cc.tween(cc.find("Canvas/shuye")).to(.5,{color:cc.color(255,255,255)}).start()});break;case"noThank":this.unschedule(this.reliveScheduleFun),t.prototype.doClose.call(this,function(){o.onClose()}),cc.tween(cc.find("Canvas/shuye")).to(.5,{color:cc.color(255,255,255)}).start()}},e.prototype.onClose=function(){r.default.isPlayAnction=!0,r.default.getCom(l.default).grayAnction(0)},e.prototype.showLiuGuang=function(){var t=this;this.arrLiuGuang[0].x=-290,this.arrLiuGuang[1].x=250,cc.tween(this.arrLiuGuang[0]).to(.3,{position:cc.v3(290,this.arrLiuGuang[0].y)}).delay(.1).call(function(){cc.tween(t.arrLiuGuang[1]).to(.3,{position:cc.v3(-280,t.arrLiuGuang[1].y)}).start()}).start()},i([p(cc.SpriteFrame)],e.prototype,"arrTimeSpf",void 0),i([p(cc.Sprite)],e.prototype,"daoTime",void 0),i([p(cc.Node)],e.prototype,"arrLiuGuang",void 0),i([d],e)}(s.BaseAnction);o.default=f,cc._RF.pop()},{"../Core/App":"App","../Core/AudioManage":"AudioManage","../Core/BaseAnction":"BaseAnction","../Game/gameScene":"gameScene","../SDK/FacebookIG":"FacebookIG"}],ResultUI:[function(t,e,o){"use strict";cc._RF.push(e,"e2eb8T3GkRHm7qyzIyZnJUI","ResultUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/AudioManage"),s=t("../Core/BaseAnction"),l=t("../Core/UIManage"),u=t("../Game/gameScene"),h=t("../SDK/FacebookIG"),d=cc._decorator,p=d.ccclass,f=d.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score=null,e.bestScore=null,e.resultSP=null,e.arrBtn=[],e.arrLiuGuang=[],e.lbScore=null,e.photo=null,e}return a(e,t),e.prototype.onEnable=function(){var t=this;this.node.getChildByName("jiazaiMask").active=!1,this.lbScore.node.active=!1,r.default.gameData.playNum<=5&&h.default.logEvent("game_ju0000"+r.default.gameData.playNum+"_end"),this.node.zIndex=-1,this.scheduleOnce(function(){h.default.shareScore(r.default.gameData.scoreNum),t.scheduleOnce(function(){h.default.getRankDataByLocal(r.default.gameData.scoreNum,function(e){for(var o=0;o<e.length;o++)if(e[o].player.getID()==FBInstant.player.getID()){t.lbScore.string=e[o].score.toString(),t.lbScore.node.active=!0;break}})})}),cc.tween(this.node).delay(.1).call(function(){t.node.x=r.default.getCom(u.default).node.width,t.node.zIndex=1}).to(.3,{position:cc.v3()},{easing:cc.easing.sineIn}).delay(.2).call(function(){t.onOAOver()}).start(),r.default.gameData.hadBreak?(this.initScore(this.score,0),this.initScore(this.bestScore,0)):(this.initScore(this.score,0),this.initScore(this.bestScore,r.default.gameData.bestScore))},e.prototype.initScore=function(t,e){var o=r.default.GameManage.convertNum(e);t.getChildByName("unit").y=40.4+80.8*o[0],t.getChildByName("decade").y=40.4+80.8*o[1],t.getChildByName("hundred").y=40.4+80.8*o[2],t.getChildByName("thousand").y=40.4+80.8*o[3],t.getChildByName("tenThousands").y=40.4+80.8*o[4],t.getChildByName("hundredThousands").y=40.4+80.8*o[5]},e.prototype.onOAOver=function(){window.FBInstant&&h.default.setHead(this.photo,FBInstant.player.getPhoto()),this.unschedule(this.showLiuGuang),this.showLiuGuang(),this.schedule(this.showLiuGuang,3),r.default.gameData.hadBreak&&(r.default.AudioManage.playSound(c.MusicEnum.break),r.default.getCom(u.default).runScore(this.bestScore,r.default.gameData.bestScore)),r.default.getCom(u.default).runScore(this.score,r.default.gameData.scoreNum),r.default.getCom(u.default).langNode.children.forEach(function(t){t.active=!0})},e.prototype.showLiuGuang=function(){var t=this;this.arrLiuGuang[0].x=-290,this.arrLiuGuang[1].x=250,cc.tween(this.arrLiuGuang[0]).to(.3,{position:cc.v3(290,this.arrLiuGuang[0].y)}).delay(.1).call(function(){cc.tween(t.arrLiuGuang[1]).to(.3,{position:cc.v3(-280,t.arrLiuGuang[1].y)}).start()}).start()},e.prototype.onClick=function(t){var e=this,o=function(){r.default.gameData.playNum++,r.default.gameData.playNum<=50?h.default.logEvent("game_ju"+r.default.GameManage.getNumAs5Digits(r.default.gameData.playNum)):r.default.gameData.playNum%50==0&&h.default.logEvent("game_ju"+r.default.GameManage.getNumAs5Digits(r.default.gameData.playNum)),h.default.logEvent("StargeGame"),cc.tween(e.node).to(.3,{position:cc.v3(-r.default.getCom(u.default).node.width,0,0)},{easing:cc.easing.sineIn}).delay(.2).call(function(){r.default.getCom(u.default).restart(),e.node.active=!1}).start()};switch(t){case"done":h.default.onPlayWidthFriend(o,o);break;case"rank":r.default.UIManage.showUI(l.UIEnum.rankUI);break;case"share":h.default.shareAsync();break;case"random":this.node.getChildByName("jiazaiMask").active=!0,cc.find("Canvas/shuye").color=cc.color(155,155,155),h.default.matchPlayerAsync(function(){e.node.getChildByName("jiazaiMask").active=!1,cc.find("Canvas/shuye").color=cc.Color.WHITE,h.default.setOtherPlayer(),h.default.isSolo=!1,o()},function(){e.node.getChildByName("jiazaiMask").active=!1,cc.find("Canvas/shuye").color=cc.Color.WHITE,h.default.setOtherPlayer(),h.default.isSolo=!1,o()});break;case"menu":this.doClose(function(){r.default.UIManage.hidUINode(e.node),r.default.UIManage.hidUI(l.UIEnum.gameScene),r.default.UIManage.showUI(l.UIEnum.menuUI)})}},i([f(cc.Node)],e.prototype,"score",void 0),i([f(cc.Node)],e.prototype,"bestScore",void 0),i([f(sp.Skeleton)],e.prototype,"resultSP",void 0),i([f(cc.Node)],e.prototype,"arrBtn",void 0),i([f(cc.Node)],e.prototype,"arrLiuGuang",void 0),i([f(cc.Label)],e.prototype,"lbScore",void 0),i([f(cc.Sprite)],e.prototype,"photo",void 0),i([p],e)}(s.BaseAnction);o.default=g,cc._RF.pop()},{"../Core/App":"App","../Core/AudioManage":"AudioManage","../Core/BaseAnction":"BaseAnction","../Core/UIManage":"UIManage","../Game/gameScene":"gameScene","../SDK/FacebookIG":"FacebookIG"}],RootNode:[function(t,e,o){"use strict";cc._RF.push(e,"35710ijJX5Lhq9jgexxhCjP","RootNode");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.RootNode=void 0;var r=t("../Game/gameScene"),c=t("../SDK/FacebookIG"),s=t("./App"),l=cc._decorator,u=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiContent=null,e.effectContent=null,e.ploadPrefab=[],e.noADsNode=null,e}return a(e,t),e.prototype.onLoad=function(){c.default.init(),cc.macro.ENABLE_MULTI_TOUCH=!1,cc.game.addPersistRootNode(this.node),cc.game.setFrameRate(59),cc.game.on(cc.game.EVENT_HIDE,function(){s.default.GameManage.scoreBk=s.default.gameData.scoreNum,s.default.GameManage.onGameExit()}),cc.game.on(cc.game.EVENT_SHOW,function(){c.default.logEvent("StargeGame"),s.default.hasCom(r.default)&&(s.default.gameData.cubPileMap=[],s.default.gameData.scoreNum=s.default.GameManage.scoreBk)}),this.node.addComponent(cc.AudioSource),s.default.init(this.uiContent,this.node.getComponent(cc.AudioSource),this.effectContent,this.noADsNode)},e.prototype.update=function(t){s.default.update(t)},e.prototype.start=function(){c.default.logEvent("StargeGame"),this.unschedule(this.scheduleFun),this.schedule(this.scheduleFun,1),c.logData.init()},e.prototype.scheduleFun=function(){s.default.gameData.playTime++;for(var t=0;t<c.logData.arrLogTime.length;t++)s.default.gameData.playTime==c.logData.arrLogTime[t]&&c.default.logEvent("time"+s.default.GameManage.getNumAs5Digits(s.default.gameData.playTime));s.default.gameData.playTime%60==0&&c.default.logEvent("everyMinute")},i([h(cc.Node)],e.prototype,"uiContent",void 0),i([h(cc.Node)],e.prototype,"effectContent",void 0),i([h(cc.Prefab)],e.prototype,"ploadPrefab",void 0),i([h(cc.Node)],e.prototype,"noADsNode",void 0),i([u],e)}(cc.Component);o.RootNode=d,cc._RF.pop()},{"../Game/gameScene":"gameScene","../SDK/FacebookIG":"FacebookIG","./App":"App"}],SetUI:[function(t,e,o){"use strict";cc._RF.push(e,"d46adOX1vdEsqRjiB+Z4Ml0","SetUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/BaseAnction"),s=t("../Game/gameScene"),l=t("../SDK/FacebookIG"),u=cc._decorator,h=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrSound=[],e}return a(e,t),e.prototype.onEnable=function(){this.retfreshSoundBtn()},e.prototype.retfreshSoundBtn=function(){this.arrSound[0].active=r.default.gameData.isSoundOn,this.arrSound[1].active=!r.default.gameData.isSoundOn},e.prototype.onClick=function(t){var e=this;switch(t){case"replay":l.logData.curInsertAdFrom="set",r.default.GameManage.isDie=!0,l.default.showInsertAd(l.adIDFB.insertID2,function(){r.default.getCom(s.default).restart(),cc.tween(e.node).to(.3,{position:cc.v3(0,0,0)},{easing:cc.easing.backOut}).start(),r.default.getCom(s.default).setIndex=0,r.default.gameData.playNum<=5&&l.default.logEvent("game_ju0000"+r.default.gameData.playNum+"_end"),r.default.gameData.playNum++,l.default.logEvent("game_ju"+r.default.GameManage.getNumAs5Digits(r.default.gameData.playNum)),l.default.logEvent("StargeGame")});break;case"soundOn":case"soundOff":r.default.AudioManage.switchAll(),this.retfreshSoundBtn();break;case"tiaoZhan":l.default.tiaoZhan();break;case"fenXiang":l.default.shareAsync()}},i([d(cc.Node)],e.prototype,"arrSound",void 0),i([h],e)}(c.BaseAnction);o.default=p,cc._RF.pop()},{"../Core/App":"App","../Core/BaseAnction":"BaseAnction","../Game/gameScene":"gameScene","../SDK/FacebookIG":"FacebookIG"}],SureUI:[function(t,e,o){"use strict";cc._RF.push(e,"e1919DNt7NJaLJushvkF+6l","SureUI");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/AudioManage"),s=t("../Core/BaseAnction"),l=t("../Game/gameScene"),u=t("../SDK/FacebookIG"),h=cc._decorator,d=h.ccclass,p=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.arrBgSpf=[],e.btnSprite=null,e.arrBtnSpf=[],e.bgIndex=0,e.btnIndex=0,e}return a(e,t),e.prototype.onEnable=function(){t.prototype.onEnable.call(this),cc.tween(cc.find("Canvas/shuye")).to(.4,{color:cc.color(155,155,155)}).start(),this.bgIndex="refresh"==r.default.getCom(l.default).usePropName?1:0,this.bg.spriteFrame=this.arrBgSpf[this.bgIndex],this.btnIndex="refresh"==r.default.getCom(l.default).usePropName?r.default.gameData.useRefreshNum:r.default.gameData.useFallNum,this.btnSprite.spriteFrame=this.arrBtnSpf[this.btnIndex]},e.prototype.onClick=function(e){var o=this;switch(e){case"noThank":t.prototype.doClose.call(this),cc.tween(cc.find("Canvas/shuye")).to(.4,{color:cc.color(255,255,255)}).start();break;case"get":var n=function(){r.default.gameData.useFallNum++,r.default.GameManage.isFall=!0,r.default.GameManage.fallDown()},a=function(){r.default.AudioManage.playSound(c.MusicEnum.refresh),r.default.gameData.useRefreshNum++,r.default.getCom(l.default).creatorCubPile(),o.scheduleOnce(function(){r.default.getCom(l.default).checkDie()})};0==this.btnIndex?u.default.shareAsync(function(){t.prototype.doClose.call(o,function(){0==o.bgIndex&&n(),1==o.bgIndex&&a()}),cc.tween(cc.find("Canvas/shuye")).to(.4,{color:cc.color(255,255,255)}).start()}):1==this.btnIndex&&u.default.showVideoAd(u.adIDFB.videoId1,function(e){e&&(t.prototype.doClose.call(o,function(){0==o.bgIndex&&n(),1==o.bgIndex&&a(),r.default.getCom(l.default).arrBtn[o.bgIndex].node.getChildByName("Background").color=cc.Color.GRAY,r.default.getCom(l.default).arrBtn[o.bgIndex].interactable=!1}),cc.tween(cc.find("Canvas/shuye")).to(.4,{color:cc.color(255,255,255)}).start())})}},i([p(cc.Sprite)],e.prototype,"bg",void 0),i([p(cc.SpriteFrame)],e.prototype,"arrBgSpf",void 0),i([p(cc.Sprite)],e.prototype,"btnSprite",void 0),i([p(cc.SpriteFrame)],e.prototype,"arrBtnSpf",void 0),i([d],e)}(s.BaseAnction);o.default=f,cc._RF.pop()},{"../Core/App":"App","../Core/AudioManage":"AudioManage","../Core/BaseAnction":"BaseAnction","../Game/gameScene":"gameScene","../SDK/FacebookIG":"FacebookIG"}],UIManage:[function(t,e,o){"use strict";cc._RF.push(e,"38afcXebbFBb6ZqUeLLVfLa","UIManage"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIEnum=void 0;var n=t("./BaseUI");(function(t){t.gameScene="gameScene",t.reliveUI="reliveUI",t.resultUI="resultUI",t.setUI="setUI",t.guideUI="guideUI",t.menuUI="menuUI",t.pauseUI="pauseUI",t.sureUI="sureUI",t.rankUI="rankUI",t.rankPkUI="rankPkUI"})(o.UIEnum||(o.UIEnum={}));var a=function(){function t(t){this.uiContent=null,this.effectContent=null,this.mapUI={},this.quanPingYRat=1,this.quanPingXRat=1,this.uiContent=t,this.shiPei()}return t.prototype.shiPei=function(){var t=this.uiContent.getContentSize(),e=cc.view.getFrameSize(),o=t.width,n=t.height;t.width/t.height>e.width/e.height?(this.quanPingYRat=o/n*e.height/e.width,o=t.width,n=e.height/e.width*o):(this.quanPingXRat=n/o*e.width/e.height,o=(n=t.height)*e.width/e.height),cc.view.setDesignResolutionSize(o,n,cc.view.getResolutionPolicy())},t.prototype.setQuanPing=function(t){var e,o=cc.view.getDesignResolutionSize(),n=t.width,a=t.height;e=n/a>o.width/o.height?n/a*o.height/o.width:a/n*o.width/o.height,t.width=n*e,t.height=a*e},t.prototype.showUI=function(t,e,o){var a=this;this.getUIPrefab(t).then(function(t){t.getComponent(n.BaseUI).args=o,t.active=!0,t.setSiblingIndex(a.uiContent.children.length-1),e&&e()})},t.prototype.hidUI=function(t){this.mapUI[t]&&(this.mapUI[t].active=!1)},t.prototype.hidUINode=function(t){t.active=!1},t.prototype.getUIPrefab=function(t){var e=this;return new Promise(function(o){e.mapUI[t]?o(e.mapUI[t]):cc.loader.loadRes("UIPrefab/"+t,cc.Prefab,function(a,i){if(a)console.log(a);else{var r=cc.instantiate(i);r.active=!1,e.mapUI[t]=r,r.setParent(e.uiContent),r.getComponent(n.BaseUI).onCreat(),o(r)}})})},t}();o.default=a,cc._RF.pop()},{"./BaseUI":"BaseUI"}],bomb:[function(t,e,o){"use strict";cc._RF.push(e,"c3e54HJQeVGx5a/7m5ZQi+F","bomb");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boomSp=null,e.boomNode=null,e.progressSp=null,e.progressNode=null,e}return a(e,t),e.prototype.onEnable=function(){this.hidProgress(),this.boomSp.setAnimation(0,"bolang1",!0),this.boomNode.active=!0},e.prototype.showProgress=function(){var t=this;this.progressNode.active=!0,this.progressSp.fillRange=1;var e=0;this.schedule(function(o){var n=1-(e+=o)/r.default.GameManage.dieDelayTime;t.progressSp.fillRange=n,e>=r.default.GameManage.dieDelayTime&&t.unscheduleAllCallbacks()})},e.prototype.hidProgress=function(){this.progressNode.active=!1,this.unscheduleAllCallbacks()},e.prototype.onBoom=function(){var t=this;this.boomSp.setAnimation(0,"boom1",!1),this.boomNode.active=!1,this.scheduleOnce(function(){t.node.active=!1},.4)},i([l(sp.Skeleton)],e.prototype,"boomSp",void 0),i([l(cc.Node)],e.prototype,"boomNode",void 0),i([l(cc.Sprite)],e.prototype,"progressSp",void 0),i([l(cc.Node)],e.prototype,"progressNode",void 0),i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Core/App":"App"}],break:[function(t,e,o){"use strict";cc._RF.push(e,"63a68kvy3hBpLRvyceeRJfm","break");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../Core/App"),c=t("../gameScene"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lizi=null,e.new=null,e}return a(e,t),e.prototype.onEnable=function(){var t=this;this.lizi.resetSystem(),this.new.opacity=255,this.new.scale=0,cc.Tween.stopAllByTarget(this.new),cc.tween(this.new).delay(.2).to(.6,{scale:1.1},cc.easeElasticOut(.4)).delay(1.6).to(.2,{scale:1.6},cc.easeOut(1)).to(.2,{opacity:0}).call(function(){r.default.getCom(c.default).node.getChildByName("newBest").scale=0,r.default.getCom(c.default).node.getChildByName("newBest").active=!0,cc.tween(r.default.getCom(c.default).node.getChildByName("newBest")).to(.3,{scale:1.15}).start(),t.node.parent=r.default.getCom(c.default).node,t.node.active=!1}).start()},i([u(cc.ParticleSystem)],e.prototype,"lizi",void 0),i([u(cc.Node)],e.prototype,"new",void 0),i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Core/App":"App","../gameScene":"gameScene"}],clearAll:[function(t,e,o){"use strict";cc._RF.push(e,"530e2lGc2BEYYgmt171h3Fi","clearAll");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("./gameScene"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbScore=null,e.score=0,e}return a(e,t),e.prototype.start=function(){var t=this,e=this.getScore();this.lbScore.string=e.toString(),r.default.getCom(c.default).addScore(e);var o=this.node.children[0].scale;cc.tween(this.node.children[0]).to(.1,{scale:1.2*o}).to(.13,{scale:.95*o}).to(.11,{scale:1.05*o}).to(.05,{scale:1*o}).delay(.7).to(.15,{opacity:0}).start(),this.node.children[1].opacity=0;var n=this.node.children[1].scale;cc.tween(this.node.children[1]).delay(.15).call(function(){t.node.children[1].opacity=255}).to(.09,{scale:1.1*n}).to(.13,{scale:.95*n}).to(.11,{scale:1.05*n}).to(.05,{scale:1*n}).delay(.55).to(.15,{opacity:0}).call(function(){r.default.getCom(c.default).creatorCubPile(),t.node.destroy()}).start()},e.prototype.getScore=function(){return this.score<1e3?1e3:this.score>=1e3&&this.score<5e3?5e3:this.score>=5e3?1e4:void 0},i([u(cc.Label)],e.prototype,"lbScore",void 0),i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Core/App":"App","./gameScene":"gameScene"}],comb:[function(t,e,o){"use strict";cc._RF.push(e,"d501dKThYxLM5YrdAEUQ2xb","comb");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../Core/App"),c=t("../gameScene"),s=t("./getScore"),l=cc._decorator,u=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.arrSpf=[],e.getScore=null,e.score=0,e.initScale=0,e}return a(e,t),e.prototype.start=function(){var t=this;if(this.node.zIndex=2,this.initScale=this.node.scale,this.score=r.default.GameManage.getScore,r.default.GameManage.lianjiCount<2){var e=this.showGetScore();this.setPosition(e)}else if(this.setPosition(this.node),this.sprite.spriteFrame=this.arrSpf[r.default.GameManage.lianjiCount],r.default.GameManage.lianjiCount<=3)this.node.scale=0,cc.tween(this.node).to(.3,{scale:this.initScale},cc.easeBackOut()).delay(.6).to(.3,{scale:0},cc.easeIn(3)).call(function(){t.showGetScore()}).start();else if(r.default.GameManage.lianjiCount>3){var o=this.node.x;this.node.x-=200,cc.tween(this.node).to(.4,{position:cc.v3(o,this.node.y,0)},cc.easeBackOut()).delay(.6).to(.3,{scale:0},cc.easeIn(3)).call(function(){t.showGetScore()}).start()}},e.prototype.showGetScore=function(){this.node.destroy();var t=cc.instantiate(this.getScore);return t.parent=this.node.parent,t.position=this.node.position,t.getComponent(s.default).score=this.score,t},e.prototype.setPosition=function(t){var e=this.getX(),o=this.getY(),n=0,a=0,i=0,s=0;if(null==e)for(var l=0;l<r.default.GameManage.arrHasCub.length;l++)r.default.GameManage.arrHasCub[l].Y==r.default.GameManage.arrRow[0]&&(n+=r.default.GameManage.arrHasCub[l].node.x,i++);if(null==o)for(l=0;l<r.default.GameManage.arrHasCub.length;l++)r.default.GameManage.arrHasCub[l].X==r.default.GameManage.arrCol[0]&&(a+=r.default.GameManage.arrHasCub[l].node.y,s++);var u=0==i?(e-(r.default.GameManage.H-1)/2)*r.default.GameManage.space:n/i,h=0==s?(o-(r.default.GameManage.V-1)/2)*r.default.GameManage.space:a/s,d=r.default.getCom(c.default).planContent.convertToWorldSpaceAR(cc.v3(u,h)),p=t.parent.convertToNodeSpaceAR(d);p.x<-(t.parent.width/2-t.width/2*t.scale-20)&&(p.x=-(t.parent.width/2-t.width/2*t.scale-20)),p.x>t.parent.width/2-t.width/2*t.scale-20&&(p.x=t.parent.width/2-t.width/2*t.scale-20),t.position=p},e.prototype.getX=function(){var t=null;return 1==r.default.GameManage.arrCol.length?t=r.default.GameManage.arrCol[0]:r.default.GameManage.arrCol.length>1&&(t=(r.default.GameManage.arrCol[0]+r.default.GameManage.arrCol[r.default.GameManage.arrCol.length-1])/2),t},e.prototype.getY=function(){var t=null;return 1==r.default.GameManage.arrRow.length?t=r.default.GameManage.arrRow[0]:r.default.GameManage.arrRow.length>1&&(t=(r.default.GameManage.arrRow[0]+r.default.GameManage.arrRow[r.default.GameManage.arrRow.length-1])/2),t},i([h(cc.Sprite)],e.prototype,"sprite",void 0),i([h(cc.SpriteFrame)],e.prototype,"arrSpf",void 0),i([h(cc.Prefab)],e.prototype,"getScore",void 0),i([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Core/App":"App","../gameScene":"gameScene","./getScore":"getScore"}],cubManage:[function(t,e,o){"use strict";cc._RF.push(e,"8bc80NpN8RAV7v2ben/oQKB","cubManage"),Object.defineProperty(o,"__esModule",{value:!0}),o.AllCubData=o.PlayerType=void 0;var n=t("../Core/App"),a=function(){function t(){this.arrLevel0All=[1,2,3,4,5,6,7,8,9,10,11,12,15,16,17,18,19,20,21,22,23,24,25,26,57,58,59,60],this.arrLevel_1=[[1],[2,3],[4,5],[6,7],[8,9,10,11],[12]],this.arrLevel0=[[15,16,17,18],[19,20,21,22],[23,24,25,26],[57,58,59,60]],this.arrLevel1=[[37,38]],this.arrLevel2=[[13,14]],this.arrLevel3=[[35]],this.arrLevel4=[[39,40,41,42]],this.arrLevel5=[[36]],this.arrLevel6=[[43,44,45,46]],this.arrLevel7=[[55]],this.arrTarget=[]}return t.prototype.GetArr=function(t){this.arrTarget=[],this.AddList(this.arrTarget,this.arrLevel_1),t>=300&&this.AddList(this.arrTarget,this.arrLevel0),t>=500&&this.AddList(this.arrTarget,this.arrLevel1),t>=1e3&&this.AddList(this.arrTarget,this.arrLevel2),t>=1500&&this.AddList(this.arrTarget,this.arrLevel3),t>=2e3&&this.AddList(this.arrTarget,this.arrLevel4),t>=1e4&&this.AddList(this.arrTarget,this.arrLevel5)},t.prototype.GetBlockLevel2=function(t){this.GetArr(t);var e=this.arrTarget[Math.floor(Math.random()*this.arrTarget.length)];return e[Math.floor(Math.random()*e.length)]},t.prototype.AddList=function(t,e){for(var o=0;o<e.length;o++)t.push(e[o])},t}();o.default=a;var i,r=function(){},c=function(t,e){this.dicDicPlan={},this.plan=t,this.dicDicPlan=e};(function(t){t[t.xiaoBai=0]="xiaoBai",t[t.laoWanJia=1]="laoWanJia",t[t.kaGuan=2]="kaGuan"})(i=o.PlayerType||(o.PlayerType={}));var s=function(){function t(){this.arrPlanData=[],this.dicCheckEliminateH={},this.dicCheckEliminateV={},this.arrCubData=[],this.arrResult={},this.arrNotCanPlace=[],this.arrCanEliminate=[],this.arrCanPlaceId=[],this.arrCanPlaceNoEliminate=[],this.dicEH={},this.dicEV={},window.AllCubData=this,this.Init()}return t.prototype.RefreshArrCubData=function(){var t=this;this.arrResult={},this.arrNotCanPlace=[],this.arrCanEliminate=[],this.arrCanPlaceId=[],this.arrCanPlaceNoEliminate=[],this.dicEH=[],this.dicEV=[],this.RefreshEliminateHAndV(),this.arrCubData.forEach(function(e){t.GetHGas(e.id)&&t.CheckCanPlace(e)})},t.prototype.RefreshEliminateHAndV=function(){var t=this;this.dicCheckEliminateH={},this.dicCheckEliminateV={},n.default.GameManage.arrPlanOne.forEach(function(e){null!=e.hasCub&&(t.dicCheckEliminateH.hasOwnProperty(e.X)||(t.dicCheckEliminateH[e.X]=[]),t.dicCheckEliminateH[e.X].push(e),t.dicCheckEliminateV.hasOwnProperty(e.Y)||(t.dicCheckEliminateV[e.Y]=[]),t.dicCheckEliminateV[e.Y].push(e))})},t.prototype.FindKon=function(){var t=this,e=[];n.default.GameManage.arrPlanOne.forEach(function(t){t.hasCub||e.push(t)});for(var o=[],a=function(t){var n=e[t],a=!1;if(o.forEach(function(t){t.indexOf(n)>=0&&(a=!0)}),!a){var r=[];i.FindAllNear(n,e,r),o.push(r)}},i=this,r=0;r<e.length;r++)a(r);var c=[];return o.forEach(function(e){for(var o=0;o<t.arrCubData.length;o++){var n=t.arrCubData[o];if(t.GetHGas(n.id)&&t.CheckCanPlaceDui(n,e)){c.push(n.id);break}}}),c},t.prototype.FindAllNear=function(t,e,o){var n=this;e.forEach(function(a){cc.Vec2.distance(cc.v2(t.X,t.Y),cc.v2(a.X,a.Y))<=1.05&&o.indexOf(a)<0&&(o.push(a),n.FindAllNear(a,e,o))})},t.prototype.CheckCanPlaceDui=function(t,e){if(e.length<4)return!1;if(t.arrOffsetX.length!=e.length)return!1;e.sort(function(t,e){return t.node.x==e.node.x?t.node.y-e.node.y:t.node.x-e.node.x});var o=[],n=[],a=e[0];o.push(0),n.push(0);for(var i=1;i<e.length;i++){var r=e[i],c=r.X-a.X,s=r.Y-a.Y;o.push(c),n.push(s)}for(var l=!0,u=0;u<t.arrOffsetX.length;u++)if(t.arrOffsetX[u]!=o[u]){l=!1;break}for(u=0;u<t.arrOffsetY.length&&l;u++)if(t.arrOffsetY[u]!=n[u]){l=!1;break}return l},t.prototype.GetHGas=function(t){n.default.GameManage.GetCubManage.GetArr(n.default.gameData.scoreNum);for(var e=0;e<n.default.GameManage.GetCubManage.arrTarget.length;e++)for(var o=n.default.GameManage.GetCubManage.arrTarget[e],a=0;a<o.length;a++)if(o[a]==t)return!0;return!1},t.prototype.GetCanEliminateCount=function(t,e){var o=0,n=function(n){var i=a.dicCheckEliminateH[n].length;(i+=t.filter(function(t){return t.X==Number(n)}).length)>=a.h&&(o++,a.dicEH[n]||(a.dicEH[n]=[]),a.dicEH[n].indexOf(e)<0&&a.dicEH[n].push(e))},a=this;for(var i in this.dicCheckEliminateH)n(i);var r=function(n){var a=c.dicCheckEliminateV[n].length;(a+=t.filter(function(t){return t.Y==Number(n)}).length)>=c.v&&(o++,c.dicEV[n]||(c.dicEV[n]=[]),c.dicEV[n].indexOf(e)<0&&c.dicEV[n].push(e))},c=this;for(var i in this.dicCheckEliminateV)r(i);return o},t.prototype.CheckCanPlace=function(t){t.arrPlacePlan=[],t.arrEliminateCount=[];for(var e=!1,o=0,n=0;n<this.arrPlanData.length;n++){for(var a=this.arrPlanData[n],i=!0,r=[],c=0;c<t.arrOffsetX.length;c++){var s=t.arrOffsetX[c],l=t.arrOffsetY[c];a.dicDicPlan.hasOwnProperty(s)&&a.dicDicPlan[s].hasOwnProperty(l)&&null==a.dicDicPlan[s][l].hasCub?r.push(a.dicDicPlan[s][l]):i=!1}if(i){t.arrPlacePlan.push(r);var u=this.GetCanEliminateCount(r,t.id);o=Math.max(u,o),t.arrEliminateCount.push(u),this.arrResult.hasOwnProperty(u)||(this.arrResult[u]=[]),this.arrResult[u].indexOf(t.id)<0&&this.arrResult[u].push(t.id),u>0&&this.arrCanEliminate.indexOf(t.id)<0&&this.arrCanEliminate.push(t.id),this.arrCanPlaceId.indexOf(t.id)<0&&this.arrCanPlaceId.push(t.id),e=!0}}e||this.arrNotCanPlace.push(t.id),e&&0==o&&this.arrCanPlaceNoEliminate.push(t.id)},t.prototype.CheckAndChangeId=function(t,e){var o=t;switch(e){case i.xiaoBai:this.arrNotCanPlace.indexOf(t)>=0&&(this.arrCanEliminate.length>0?(o=this.arrCanEliminate[Math.floor(Math.random()*this.arrCanEliminate.length)],cc.log("\u5c0f\u767d\uff0c\u4e0d\u53ef\u653e\u7f6e\u6362\u53ef\u6d88\u9664."+t+">>"+o)):this.arrCanPlaceId.length>0?(o=this.arrCanPlaceId[Math.floor(Math.random()*this.arrCanPlaceId.length)],cc.log("\u5c0f\u767d\uff0c\u4e0d\u53ef\u653e\u7f6e\u6362\u53ef\u653e\u7f6e."+t+">>"+o)):cc.log("\u5c0f\u767d\uff0c\u4e0d\u53ef\u653e\u7f6e\u6362\u53ef\u653e\u7f6e\u3002\uff01\uff01\uff01\u6ca1\u53ef\u66ff\u6362\u65b9\u5757\u3002"+t));break;case i.laoWanJia:n.default.gameData.scoreNum<=1e3&&(this.arrNotCanPlace.indexOf(t)>=0&&100*Math.random()<60&&(this.arrCanPlaceId.length>0?(o=this.arrCanPlaceId[Math.floor(Math.random()*this.arrCanPlaceId.length)],cc.log("\u8001\u73a9\u5bb6,1000\u5206\u5185,60%\u4e0d\u53ef\u653e\u7f6e\u6362\u53ef\u653e\u7f6e."+t+">>"+o)):cc.log("\u8001\u73a9\u5bb6,1000\u5206\u5185,60%\u4e0d\u53ef\u653e\u7f6e\u6362\u53ef\u653e\u7f6e.!!!\u6ca1\u53ef\u66ff\u6362\u65b9\u6848")),n.default.gameData.scoreNum>1e3&&this.arrNotCanPlace.indexOf(t)>=0&&100*Math.random()<30&&(this.arrCanPlaceId.length>0?(o=this.arrCanPlaceId[Math.floor(Math.random()*this.arrCanPlaceId.length)],cc.log("\u5361\u5173\uff1a30%\u4e0d\u53ef\u653e\u7f6e\u6362\u53ef\u653e\u7f6e.{id}>>{newId}")):cc.log("\u5361\u5173\uff1a30%\u4e0d\u53ef\u653e\u7f6e\u6362\u53ef\u653e\u7f6e.!!!\u6ca1\u53ef\u66ff\u6362\u65b9\u6848")));break;case i.kaGuan:if(this.arrCanEliminate.indexOf(t)>=0&&100*Math.random()<60){var a=[];a.concat(this.arrNotCanPlace),a.length>0?(o=a[Math.floor(Math.random()*a.length)],cc.log("\u5361\u5173,1000\u5206\u4ee5\u4e0a,60% \u53ef\u6d88\u9664\u884c\u5757\u6362\u5176\u5b83\u65b9\u5757."+t+">>"+o)):cc.log("\u5361\u5173,1000\u5206\u4ee5\u4e0a,60% \u53ef\u6d88\u9664\u884c\u5757\u6362\u5176\u5b83\u65b9\u5757.!!!\u6ca1\u53ef\u66ff\u6362\u65b9\u6848")}}return o},t.prototype.GetChangBestId=function(){var t=null;if(Math.random()>.5)for(var e=6;e>=3;e--)if(this.arrResult.hasOwnProperty(e)){t=this.arrResult[e][Math.floor(Math.random()*this.arrResult[e].length)];break}return t},t.prototype.GetCanPlace=function(){var t=1;if(this.arrCanPlaceNoEliminate.length>0)return this.arrCanPlaceNoEliminate[Math.floor(Math.random()*this.arrCanPlaceNoEliminate.length)];for(var e=0;e<5;e++)if(this.arrResult.hasOwnProperty(e)&&this.arrResult[e].length>0){t=this.arrResult[e][Math.floor(Math.random()*this.arrResult[e].length)];break}return t},t.prototype.GetIsGray=function(t){return this.arrNotCanPlace.indexOf(t)>=0},t.prototype.GetIsCanE=function(t){return this.arrCanEliminate.indexOf(t)>=0},t.prototype.GetCanEId=function(t){return this.arrCanEliminate.length>0&&(t=this.arrCanEliminate[Math.floor(Math.random()*this.arrCanEliminate.length)]),t},t.prototype.GetCanESecondId=function(t,e){var o=[],n={},a=[],i=[35,13,14];Object.keys(this.dicEH).length>Object.keys(this.dicEV).length?(n=this.dicEH,a=e?[1,2,4,6,38]:i):(n=this.dicEV,a=e?[1,3,5,7,37]:i);var r=null,c=[];for(var s in n)c.push(Number(s));c.sort(function(){return Math.random()-.5});for(var l=0;l<c.length;l++)n[s=c[l]].length>0&&null==r&&(r=s,n[s].forEach(function(t){o.indexOf(t)<0&&o.push(t)}));if(null!=r&&(n[r]=[]),o.length>0){o.sort(function(t,e){return a.indexOf(t)>=0?-1:a.indexOf(e)>=0?1:Math.random()-.5});var u=o[0];if(i.indexOf(u)>=0)for(var s in n){var h=n[s];h.indexOf(u)>=0&&h.splice(h.indexOf(u),1)}cc.log("\u5982\u679c\u6709\u8fde\u6d88,\u4f18\u5148\u66ff\u6362\u4e0d\u540c\u4f4d\u7f6e\u7684\u53ef\u6d88\u9664"+t+">>>"+u),t=u}return t},t.prototype.Init=function(){this.h=n.default.GameManage.H,this.v=n.default.GameManage.V,this.InitPlanOneData(),this.CreatorArrCubData()},t.prototype.InitPlanOneData=function(){for(var t,e=function(e){var a=n.default.GameManage.arrPlanOne[e];t={},n.default.GameManage.arrPlanOne.forEach(function(e){var o=e.X-a.X,n=e.Y-a.Y;t.hasOwnProperty(o)||(t[o]={}),t[o][n]=e}),o.arrPlanData.push(new c(a,t))},o=this,a=0;a<n.default.GameManage.arrPlanOne.length;a++)e(a)},t.prototype.CreatorArrCubData=function(){for(var t=n.default.GameManage.cubConfig,e=1;e<t.length;e++)if(!(t[e].length<=0)){for(var o=t[e],a=[],i=0;i<o.length;i++)a.push(o[i]);a.sort(function(t,e){return t.x==e.x?t.y-e.y:t.x-e.x});var c=[],s=[];c.push(0),s.push(0);for(var l=a[0],u=1;u<a.length;u++){var h=a[u].x-l.x,d=a[u].y-l.y;c.push(h),s.push(d)}var p=new r;p.id=e,p.arrOffsetX=c,p.arrOffsetY=s,p.arrPlacePlan=[],p.arrEliminateCount=[],this.arrCubData.push(p)}},t}();o.AllCubData=s,cc._RF.pop()},{"../Core/App":"App"}],cubeOne:[function(t,e,o){"use strict";cc._RF.push(e,"9390ehhjAJBWpO9Wylo/SkL","cubeOne");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/EffectManage"),s=t("../Tool/loadManage"),l=t("./gameScene"),u=cc._decorator,h=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.img=null,e.sprite=null,e}return a(e,t),e.prototype.init=function(t){this.sprite=this.node.getComponent(cc.Sprite),this.sprite.spriteFrame=this.img=t},e.prototype.onPlace=function(t,e){var o=this;void 0===e&&(e=!0);var n=r.default.getCom(l.default).cubContent.convertToNodeSpaceAR(t);if(e){var a=this.node.parent.convertToNodeSpaceAR(t);this.node.scale=.5,this.node.setPosition(cc.v3(a)),cc.tween(this.node).to(.15,{scale:1.15}).call(function(){o.node.parent=r.default.getCom(l.default).cubContent,o.node.position=n}).start()}else this.node.parent=r.default.getCom(l.default).cubContent,this.node.position=n},e.prototype.onEliminate=function(t,e,o){var n=this,a=t.name;a.includes("1")&&(a=a.slice(0,a.length-1)),0==e?(this.playEffect(a),this.onDie(),o&&o()):this.scheduleOnce(function(){n.playEffect(a),n.onDie(),o&&o()},e)},e.prototype.onDie=function(){this.node.destroy()},e.prototype.playEffect=function(t){if(r.default.getCom(l.default).node.active){var e=c.effectNameEnum.xiaochu+t;r.default.EffectManage.showEffect(e,this.node,r.default.getCom(l.default).node)}},e.prototype.tipCanEliminate=function(){this.sprite.spriteFrame=r.default.GameManage.tipColorImg},e.prototype.resetTip=function(){this.setColorImg()},e.prototype.setGray=function(){var t=this;s.default.loadRes("cubImg/gray",cc.SpriteFrame,function(e){t.sprite.spriteFrame=e})},e.prototype.setColorImg=function(){this.sprite.spriteFrame=this.img},i([h],e)}(cc.Component));o.default=d,cc._RF.pop()},{"../Core/App":"App","../Core/EffectManage":"EffectManage","../Tool/loadManage":"loadManage","./gameScene":"gameScene"}],cubePile:[function(t,e,o){"use strict";cc._RF.push(e,"5dfb26fFZZO94gxguDM2nI/","cubePile");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("./gameScene"),s=t("./cubeOne"),l=t("../Tool/loadManage"),u=t("../Core/AudioManage"),h=t("./bomb"),d=t("../UI/GuideUI"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cubContent=null,e.cubOnePrefab=null,e.initP=null,e.initParent=null,e.initScale=.4,e.arrPlanOne=[],e.arrV2=[],e.colorImg=null,e.type=null,e.isDie=!1,e.isGray=!1,e.boomNode=null,e.boomProgressIsShow=!1,e.arrTipPlan=[],e}return a(e,t),e.prototype.init=function(t,e){this.creatorAnction(),this.type=e,this.initP=this.node.position,this.initParent=this.node.parent,this.addEvent(),this.addCub(t),this.initArrV2()},e.prototype.creatorAnction=function(){this.node.scale=.15,cc.tween(this.node).to(.5,{scale:this.initScale},{easing:cc.easing.backOut}).start()},e.prototype.addEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onDrag,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchCancel,this)},e.prototype.initArrV2=function(){this.arrV2=[];for(var t=this.cubContent.children[0],e=1;e<this.cubContent.childrenCount;e++){var o=this.cubContent.children[e],n=o.x-t.x,a=o.y-t.y;this.arrV2.push(cc.v2(n,a))}},e.prototype.addCub=function(t){var e=this;r.default.GameManage.cubConfig[this.type].forEach(function(o){var n=cc.v3(o.x*r.default.GameManage.space,o.y*r.default.GameManage.space),a=cc.instantiate(e.cubOnePrefab);e.cubContent.addChild(a),a.position=n;var i=a.getComponent(s.default);e.colorImg=t;var c=t;i.init(c)})},e.prototype.onTouchStart=function(t){if(1==r.default.getCom(c.default).setIndex&&(cc.tween(r.default.getCom(c.default).topNode).to(.3,{position:cc.v3(0,0,0)},{easing:cc.easing.backOut}).start(),r.default.getCom(c.default).setIndex=0),!r.default.GameManage.isDie)if(this.isGray)this.boom();else{r.default.hasCom(d.default)&&r.default.getCom(d.default).hide(),this.node.stopAllActions(),this.arrTipPlan.length>0&&this.arrTipPlan.forEach(function(t){t.tipNode.active=!0}),r.default.GameManage.tipColorImg=this.colorImg,r.default.AudioManage.playSound(u.MusicEnum.PickUp);var e=this.cubContent.convertToWorldSpaceAR(cc.Vec3.ZERO);this.node.parent=r.default.getCom(c.default).controlCubPileContent,this.node.position=r.default.getCom(c.default).controlCubPileContent.convertToNodeSpaceAR(e),this.node.scale=1,this.onDrag(t)}},e.prototype.onDrag=function(t){if(!r.default.GameManage.isDie&&!this.isGray){var e=this.node.parent.convertToNodeSpaceAR(cc.v3(t.getLocation()));e.y+=200,this.node.position=e,this.arrPlanOne.forEach(function(t){t.onUnTip()}),this.checkCanPlace()&&this.arrPlanOne.forEach(function(t){t.onTip()}),r.default.GameManage.checkAndTipCanEliminate()}},e.prototype.onTouchCancel=function(){if(r.default.GameManage.arrPlanOne.forEach(function(t){t.tipNode.active&&(t.tipNode.active=!1)}),this.arrPlanOne.forEach(function(t){t.onUnTip()}),!r.default.GameManage.isDie&&!this.isGray){if(r.default.GameManage.isFall)return r.default.AudioManage.playSound(u.MusicEnum.error),this.node.parent=this.initParent,this.node.position=cc.Vec3.ZERO,void(this.node.scale=this.initScale);r.default.hasCom(d.default)&&r.default.getCom(d.default).show();var t=this.node.convertToWorldSpaceAR(cc.Vec3.ZERO),e=!0;if(r.default.GameManage.getIsGuide()&&(e=r.default.GameManage.guideCanPlace),this.arrPlanOne.length==this.cubContent.childrenCount&&e){r.default.AudioManage.playSound(u.MusicEnum.fangzhi),r.default.GameManage.arrHasCub=[];for(var o=0;o<this.cubContent.childrenCount;o++){var n=this.cubContent.children[o].getComponent(s.default),a=this.arrPlanOne[o],i=a.worldP;n.onPlace(i),a.hasCub=n,r.default.GameManage.arrHasCub.push(a),this.isDie=!0}this.doDestroy(),r.default.getCom(c.default).addScore(this.cubContent.childrenCount),r.default.getCom(c.default).removeCubPilce(this),r.default.GameManage.checkedAndEliminate(t,!1),r.default.getCom(c.default).checkDie()}else r.default.AudioManage.playSound(u.MusicEnum.error),this.node.parent=this.initParent,this.node.position=cc.Vec3.ZERO,this.node.scale=this.initScale}},e.prototype.checkCanPlace=function(){this.arrPlanOne=[];for(var t=r.default.GameManage.arrPlanOne,e=0;e<this.cubContent.childrenCount;e++){for(var o=this.cubContent.children[e].convertToWorldSpaceAR(cc.Vec3.ZERO),n=!1,a=0;a<t.length;a++)if(n=t[a].checkPosIsOk(o)){this.arrPlanOne.push(t[a]);var i=this.cubContent.children[e].getComponent(cc.Sprite).spriteFrame;t[a].setImg(i.name);break}if(!n)return!1}return!0},e.prototype.checkCanPlaceOnWait=function(t){var e=[];this.arrTipPlan=[];for(var o=function(o){var a=t[o],i=!0,r=[];r.push(a);for(var c=function(e){var o=n.arrV2[e].x,c=n.arrV2[e].y,s=t.find(function(t){var e=Math.abs(t.worldP.x-o-a.worldP.x)<2,n=Math.abs(t.worldP.y-c-a.worldP.y)<2;return e&&n});if(null==s)return i=!1,"break";r.push(s)},s=0;s<n.arrV2.length&&"break"!==c(s);s++);i&&e.push(r)},n=this,a=0;a<t.length;a++)o(a);return e.length>0&&(1==e.length&&(this.arrTipPlan=e[0]),!0)},e.prototype.setGray=function(){var t=this;this.isGray=!0,r.default.GameManage.isBombOpen&&(this.boomNode?this.boomNode.active=!0:l.default.loadPrefab("Prefab/bomb",function(e){t.boomNode=cc.instantiate(e),t.boomNode.parent=t.node,t.boomNode.position=cc.v3(0,0,0),t.boomProgressIsShow&&t.showBombProgress()})),this.cubContent.getComponentsInChildren(s.default).forEach(function(t){t.setGray()})},e.prototype.refreshColor=function(){this.node&&(this.boomNode&&(this.boomNode.active=!1),this.isGray=!1,this.cubContent.getComponentsInChildren(s.default).forEach(function(t){t.setColorImg()}))},e.prototype.boom=function(){r.default.GameManage.isBombOpen?(r.default.AudioManage.playSound(u.MusicEnum.boom),r.default.getCom(c.default).removeCubPilce(this),this.cubContent.children.forEach(function(t){var e=t.getComponent(s.default);e.onEliminate(e.img,0)}),this.boomNode.getComponent(h.default).onBoom(),r.default.getCom(c.default).creatorCubPoleOne(this.node.parent,this.colorImg,0),r.default.getCom(c.default).checkDie(),r.default.getCom(c.default).offDieScheduleFun(),this.doDestroy()):r.default.AudioManage.playSound(u.MusicEnum.error)},e.prototype.hidBoom=function(){this.boomNode&&(this.boomNode.active=!1)},e.prototype.showBombProgress=function(){this.boomProgressIsShow=!0,this.boomNode&&this.boomNode.active&&this.boomNode.getComponent(h.default).showProgress()},e.prototype.hidBombProgress=function(){this.boomProgressIsShow=!1,this.boomNode&&this.boomNode.active&&this.boomNode.getComponent(h.default).hidProgress()},e.prototype.onDie=function(){this.hidBoom(),this.cubContent.children.forEach(function(t){t.getComponent(s.default).onDie()}),this.doDestroy()},e.prototype.doDestroy=function(){var t=this;this.offAll(),this.scheduleOnce(function(){t.node.removeFromParent(),t.node.destroy()},.5)},e.prototype.offAll=function(){this.node.off(cc.Node.EventType.TOUCH_START),this.node.off(cc.Node.EventType.TOUCH_MOVE),this.node.off(cc.Node.EventType.TOUCH_CANCEL),this.node.off(cc.Node.EventType.TOUCH_END)},i([g(cc.Node)],e.prototype,"cubContent",void 0),i([g(cc.Prefab)],e.prototype,"cubOnePrefab",void 0),i([f],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Core/App":"App","../Core/AudioManage":"AudioManage","../Tool/loadManage":"loadManage","../UI/GuideUI":"GuideUI","./bomb":"bomb","./cubeOne":"cubeOne","./gameScene":"gameScene"}],gameScene:[function(t,e,o){"use strict";cc._RF.push(e,"74832gxTlNI95KajUzjIO9A","gameScene");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/AudioManage"),s=t("../Core/BaseUI"),l=t("../Core/EffectManage"),u=t("../Core/UIManage"),h=t("../SDK/FacebookIG"),d=t("./clearAll"),p=t("./cubeOne"),f=t("./cubePile"),g=t("./cubManage"),y=t("./planOne"),v=cc._decorator,m=v.ccclass,b=v.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score=null,e.bestScore=null,e.planOne=null,e.cubPile=null,e.cubOne=null,e.planContent=null,e.bottomCubPileContent=null,e.controlCubPileContent=null,e.cubContent=null,e.gameNode=null,e.colorSpriteArr=[],e.combPrefab=null,e.topNode=null,e.langNode=null,e.lang=null,e.arrBtn=[],e.propNode=null,e.clearAll=null,e.cubPileArr=[],e.colorSpriteMap={},e.hasTip=!1,e.dieDelayScheduleFun=null,e.progressBarAction=null,e.isCreatorCubPile=!0,e.setIndex=0,e.beforeHasCanE=!1,e.usePropName="",e}var o;return a(e,t),o=e,e.prototype.start=function(){var t=this;console.log("GameStart"),1==r.default.gameData.enterStep&&(h.default.logEvent("game_so00000"),r.default.gameData.enterStep=2),this.colorSpriteArr.forEach(function(e){t.colorSpriteMap[e.name]=e}),this.node.getChildByName("newBest").scale=r.default.gameData.hadBreak?1:0,this.node.getChildByName("newBest").zIndex=9,this.initQipan(),this.scheduleOnce(function(){t.showGuide(),t.creatorMap(),t.creatorLocalCub(),r.default.GameManage.init(),t.startGame()})},e.prototype.initQipan=function(){if(0==this.langNode.childrenCount)for(var t=0;t<r.default.GameManage.H;t++)for(var e=0;e<r.default.GameManage.H;e++){var o=cc.instantiate(this.lang);this.langNode.addChild(o),o.name=(t+e).toString(),o.setPosition(-(t-(r.default.GameManage.H-1)/2)*r.default.GameManage.space,-(e-(r.default.GameManage.H-1)/2)*r.default.GameManage.space),r.default.gameData.cubOneMap&&(o.active=!1)}},e.prototype.qipanAction=function(){var t=this;this.cubContent.childrenCount>0||(r.default.AudioManage.playSound(c.MusicEnum.qipan),this.langNode.children.forEach(function(e){e.active=!0,t.scheduleOnce(function(){e.active=!1},.04+.04*Number(e.name))}))},e.prototype.showGuide=function(){r.default.GameManage.getIsGuide()&&(h.default.logEvent("game_ju00000"),this.isCreatorCubPile=!1,r.default.GameManage.setGuideData(),r.default.UIManage.showUI(u.UIEnum.guideUI,null,{fromWordP:this.bottomCubPileContent.children[1].convertToWorldSpaceAR(cc.v3()),toWordP:this.cubContent.convertToWorldSpaceAR(cc.v3())}))},e.prototype.onGuideOver=function(){var t=this;r.default.UIManage.hidUI(u.UIEnum.guideUI),r.default.gameData.guideSetp++,r.default.GameManage.getIsGuide()?this.scheduleOnce(function(){t.showGuide(),t.creatorLocalCub(),t.startGame()},1):(r.default.gameData.playNum=1,h.default.logEvent("game_ju00000_end"),h.default.logEvent("game_ju00001"),r.default.gameData.bestScore=0,r.default.EffectManage.showEffect(l.effectNameEnum.goAhead,this.node,r.default.getCom(o).node),this.scheduleOnce(function(){r.default.gameData.scoreNum=0,t.initScore(),t.qipanAction(),t.isCreatorCubPile=!0},1.5))},e.prototype.creatorMap=function(){for(var t=0;t<r.default.GameManage.H;t++)for(var e=0;e<r.default.GameManage.V;e++){var o=cc.instantiate(this.planOne),n=o.getComponent(y.default);o.parent=this.planContent,n.init(t,e),r.default.GameManage.arrPlanOne.push(n)}},e.prototype.creatorLocalCub=function(){var t=this,e=r.default.gameData.cubOneMap;r.default.GameManage.arrPlanOne.forEach(function(o){if(e[o.X]&&e[o.X][o.Y]){var n=cc.instantiate(t.cubOne).getComponent(p.default);n.init(t.colorSpriteMap[e[o.X][o.Y]]),n.onPlace(o.worldP,!1),o.hasCub=n}})},e.prototype.startGame=function(){var t=this;this.arrBtn[0].node.getChildByName("Background").color=2==r.default.gameData.useFallNum?cc.Color.GRAY:cc.Color.WHITE,this.arrBtn[0].interactable=2!=r.default.gameData.useFallNum,this.arrBtn[1].node.getChildByName("Background").color=2==r.default.gameData.useRefreshNum?cc.Color.GRAY:cc.Color.WHITE,this.arrBtn[1].interactable=2!=r.default.gameData.useRefreshNum,this.qipanAction(),this.node.getChildByName("newBest").scale=0,this.initScore();var e=this.cubContent.childrenCount>0?0:.5;this.cubPileArr=[],r.default.isPlayAnction=!0,this.scheduleOnce(function(){t.creatorCubPile(),t.scheduleOnce(function(){t.checkDie()}),r.default.isPlayAnction=!1},e)},e.prototype.addScore=function(t){if(r.default.gameData.bestScore<r.default.gameData.scoreNum+t){!r.default.gameData.hadBreak&&r.default.gameData.bestScore>0&&(h.default.logEvent("NewBest"),this.showBreak());var e=r.default.gameData.bestScore>=h.logData.arrLogScore[h.logData.arrLogScore.length-1];if(r.default.gameData.bestScore=r.default.gameData.scoreNum+t,r.default.gameData.hadBreak=!0,r.default.gameData.guideSetp>0&&!e)for(var o=h.logData.arrLogScore.length-1;o>0;o--)if(r.default.gameData.bestScore>=h.logData.arrLogScore[o]){h.default.logEvent("game_so"+r.default.GameManage.getNumAs5Digits(h.logData.arrLogScore[o])),h.logData.arrLogScore.splice(0,h.logData.arrLogScore.indexOf(h.logData.arrLogScore[o]));break}}this.refreshScore(t)},e.prototype.showBreak=function(){this.node.getChildByName("breakLihua").active=!0,this.node.getChildByName("breakLihua").parent=cc.find("Canvas/UIParent"),r.default.AudioManage.playSound(c.MusicEnum.break)},e.prototype.refreshScore=function(t){r.default.gameData.scoreNum+=t,this.runScore(this.score,r.default.gameData.scoreNum),this.runScore(this.bestScore,r.default.gameData.bestScore)},e.prototype.showGuLi=function(){r.default.AudioManage.playSound(c.MusicEnum.combo+r.default.GameManage.eliminateSoundIndex),cc.instantiate(this.combPrefab).parent=this.node},e.prototype.creatorCubPile=function(){this.cubPileArr=[];var t=this.bottomCubPileContent,e=r.default.gameData.cubPileMap,o=t.childrenCount;if(e.length>0){for(var n=0;n<o;n++){var a=e[n];if(a){var i=this.colorSpriteMap[e[n].color];this.creatorCubPoleOne(t.children[n],i,a.type)}}r.default.gameData.cubPileMap=[]}else{if(!this.isCreatorCubPile)return;var c=[];for(n=0;n<this.colorSpriteArr.length;n++)c.push(n);r.default.GameManage.AllCubData.RefreshArrCubData();var s=[],l=0,u=[];for(n=0;n<o;n++){var d=r.default.GameManage.GetCubManage.GetBlockLevel2(r.default.gameData.scoreNum);d=r.default.GameManage.AllCubData.CheckAndChangeId(d,g.PlayerType.laoWanJia);var p=!r.default.GameManage.AllCubData.GetIsGray(d);p&&l++,u.push(p),s.push(d)}if(0==l){var f=Math.floor(Math.random()*s.length);s[f]=r.default.GameManage.AllCubData.GetCanPlace(),u[f]=!0,l++,cc.log("\u5168\u7070\uff0c\u66ff\u6362\u4e00\u4e2a\u53ef\u653e\u7f6e\u7684\u65b9\u5757")}if(l<=1){var y=[];for(n=0;n<u.length;n++)u[n]||y.push(n);f=y[Math.floor(Math.random()*y.length)],s[f]=r.default.GameManage.AllCubData.GetCanPlace(),u[f]=!0,l++,cc.log("\u4e24\u4e2a\u7070\u8272\uff0c\u66ff\u6362\u4e00\u4e2a\u53ef\u653e\u7f6e\u7684\u65b9\u5757")}if(2==l){var v=function(t){if(u[t]){var e=Math.random()>0,o=r.default.GameManage.AllCubData.arrCanEliminate;o.length>0&&e?(i=o[Math.floor(Math.random()*o.length)],cc.log("\u6709\u7070\u8272\u65b9\u5757\u5176\u4ed6\u4f18\u5148\u53ef\u6d88\u9664\uff1a"+s[t]+">>"+i),s[t]=i):cc.log("\u6709\u7070\u8272\u65b9\u5757\u5176\u4ed6\u4f18\u5148\u53ef\u6d88\u9664\uff1a\u6ca1\u6709\u53ef\u66ff\u6362\u65b9\u6848\u6216\u6982\u7387\uff1a"+e)}else{var n=s[t];if(r.default.GameManage.GetCubManage.arrLevel0All.indexOf(n)<0){var a=[];if(r.default.GameManage.AllCubData.arrNotCanPlace.forEach(function(t){r.default.GameManage.GetCubManage.arrLevel0All.indexOf(t)>=0&&a.push(t)}),a.length>0){var i=a[Math.floor(Math.random()*a.length)];cc.log("\u7070\u8272\u65b9\u5757\u4f18\u51481\u91cc\u9762\u7684:"+n+">>"+i),s[t]=i}else cc.log("\u7070\u8272\u65b9\u5757\u4f18\u51481\u91cc\u9762\u7684:\u6ca1\u6709\u53ef\u66ff\u6362\u65b9\u6848")}}};for(n=0;n<u.length;n++)v(n)}if(r.default.gameData.scoreNum<=2500)for(n=0;n<s.length;n++)r.default.GameManage.AllCubData.GetIsGray(s[n])&&(d=r.default.GameManage.AllCubData.GetCanPlace(),cc.log("2500\u4ee5\u4e0b\u4e0d\u51fa\u73b0\u7070\u8272\u65b9\u5757\uff1a"+s[n]+">>{id}"),s[n]=d);var m=r.default.GameManage.AllCubData.GetChangBestId();if(null!=m&&(f=Math.floor(Math.random()*s.length),s[f]=m,cc.log("\u751f\u6210\u6700\u4f73\u65b9\u5757\uff1a"+m)),Math.random()<1){var b=r.default.GameManage.AllCubData.FindKon();b.length>0&&(f=Math.floor(Math.random()*s.length),s[f]=b[Math.floor(Math.random()*b.length)],cc.log("\u88ab\u5305\u56f4\u7684\u65b9\u5757\uff1a"+s[f]))}var C=r.default.gameData.scoreNum<5e3&&(Object.keys(r.default.GameManage.AllCubData.dicEH).length>=5||Object.keys(r.default.GameManage.AllCubData.dicEV).length>=5);if(C&&h.default.logEvent("toCombo5"),this.beforeHasCanE||C){for(cc.log("\u6ee1\u8db3\u4e0a\u6b21\u6709\u6d88\u9664\u6216\u8005\u53ef\u4ee55\u8fde\u6d88"),n=0;n<s.length;n++)s[n]=r.default.GameManage.AllCubData.GetCanESecondId(s[n],C);s.sort(function(){return Math.random()-.5})}for(n=0;n<s.length;n++){var _=c[Math.floor(Math.random()*c.length)];c.splice(c.indexOf(_),1),i=this.colorSpriteArr[_],s[n]||console.error(n,s[n]),d=s[n]?s[n]:1,this.creatorCubPoleOne(t.children[n],i,d)}}},e.prototype.creatorCubPoleOne=function(t,e,o){var n=cc.instantiate(this.cubPile),a=n.getComponent(f.default);t.removeAllChildren(),t.addChild(n),a.init(e,o),this.cubPileArr.push(a)},e.prototype.checkDie=function(){var t=this;if(this.hasTip=!1,this.cubPileArr.length<=0)return this.creatorCubPile(),this.scheduleOnce(function(){t.checkDie()}),!1;for(var e=r.default.GameManage.arrPlanOne.filter(function(t){if(null==t.hasCub)return t}),o=!0,n=0;n<this.cubPileArr.length;n++)this.cubPileArr[n].checkCanPlaceOnWait(e)?(o=!1,this.cubPileArr[n].refreshColor()):this.cubPileArr[n].setGray();if(o){this.dieDelayScheduleFun=function(){r.default.GameManage.isDie=!0,0==r.default.gameData.reliveCount&&r.default.GameManage.isReliveOpen?r.default.UIManage.showUI(u.UIEnum.reliveUI):(r.default.isPlayAnction=!0,t.grayAnction(.5))};var a=r.default.GameManage.eliminateCount>0?.8:.5;a=r.default.GameManage.lianjiCount>=2?a+1:a,this.scheduleOnce(this.dieDelayScheduleFun,a)}return o},e.prototype.offDieScheduleFun=function(){this.cubPileArr.forEach(function(t){t.hidBombProgress()}),r.default.AudioManage.stopLoopSound(c.MusicEnum.xinTiao),this.unschedule(this.dieDelayScheduleFun)},e.prototype.grayAnction=function(t){r.default.AudioManage.playSound(c.MusicEnum.result);for(var e=[[],[],[],[]],o=[],n=0;n<r.default.GameManage.arrPlanOne.length;n++)o.push(n);for(n=o.length-1;n>=0;n--){var a=Math.floor(Math.random()*e.length);e[a].push(o[n]),o.splice(n,1)}var i={index:0},s=function(o){e[o].forEach(function(e,n){var a=.05*o+.05*n/2+t;r.default.GameManage.arrPlanOne[e].grayAnction(a,i,function(){i.index==r.default.GameManage.arrPlanOne.length-1&&(h.logData.curInsertAdFrom="result",r.default.isPlayAnction=!1,h.default.isSolo?h.default.showInsertAd(h.adIDFB.insertID2,function(){r.default.UIManage.showUI(u.UIEnum.resultUI)}):r.default.UIManage.showUI(u.UIEnum.rankPkUI))})})};for(n=0;n<e.length;n++)s(n)},e.prototype.removeCubPilce=function(t){var e=this.cubPileArr.indexOf(t);e>-1?this.cubPileArr.splice(e,1):cc.error("\u600e\u4e48\u56de\u4e8b")},e.prototype.restart=function(){this.resetData(),this.startGame()},e.prototype.resetData=function(){r.default.GameManage.isDie=!1,r.default.gameData.scoreNum=0,r.default.gameData.reliveCount=0,r.default.gameData.hadBreak=!1,r.default.gameData.useFallNum=0,r.default.gameData.useRefreshNum=0,this.cubContent.removeAllChildren(),r.default.GameManage.arrPlanOne.forEach(function(t){t.hasCub=null}),this.cubPileArr.forEach(function(t){t.onDie()}),r.default.gameData.cubPileMap=[]},e.prototype.clearAction=function(t){var e=this;this.cubPileArr.forEach(function(t){t.onDie()}),r.default.gameData.cubPileMap=[],this.cubPileArr=[],this.qipanAction(),this.scheduleOnce(function(){var o=cc.instantiate(e.clearAll);o.parent=e.node,o.getComponent(d.default).score=t},.4)},e.prototype.shake=function(t){var e=this;this.node.stopAllActions(),this.node.position=cc.v3(0,0,0),cc.tween(this.node).by(.13,{position:cc.v3(12.5,12.5)},{easing:cc.easing.backIn}).by(.22,{position:cc.v3(-17.5,-17.5)},{easing:cc.easing.backIn}).by(.09,{position:cc.v3(12.5,12.5)},{easing:cc.easing.backIn}).by(.05,{position:cc.v3(-7.5,-7.5)},{easing:cc.easing.backIn}).call(function(){e.node.position=cc.v3(0,0,0),null==t||t()}).start()},e.prototype.relive=function(){r.default.AudioManage.playSound(c.MusicEnum.boom),r.default.GameManage.isDie=!1,r.default.gameData.reliveCount=1,r.default.GameManage.arrPlanOne.forEach(function(t){t.hasCub&&t.Y>=4&&(t.hasCub.onEliminate(t.hasCub.img,0),t.hasCub=null),t.hasCub&&t.hasCub.setColorImg()}),this.checkDie()},e.prototype.runScore=function(t,e){r.default.gameData.scoreNum>=1e3&&t.getChildByName("shiban")&&t.getChildByName("shiban").active&&(t.getChildByName("shiban").active=!1),r.default.gameData.scoreNum>=1e5&&"topNode"==t.parent.name&&1.03!=t.scale&&(t.scale=1.03);var o=r.default.GameManage.convertNum(e);cc.tween(t.getChildByName("unit")).to(.3,{position:cc.v3(t.getChildByName("unit").x,40.4+80.8*o[0],0)}).start(),cc.tween(t.getChildByName("decade")).to(.3,{position:cc.v3(t.getChildByName("decade").x,40.4+80.8*o[1],0)}).start(),cc.tween(t.getChildByName("hundred")).to(.3,{position:cc.v3(t.getChildByName("hundred").x,40.4+80.8*o[2],0)}).start(),cc.tween(t.getChildByName("thousand")).to(.3,{position:cc.v3(t.getChildByName("thousand").x,40.4+80.8*o[3],0)}).start(),cc.tween(t.getChildByName("tenThousands")).to(.3,{position:cc.v3(t.getChildByName("tenThousands").x,40.4+80.8*o[4],0)}).start(),cc.tween(t.getChildByName("hundredThousands")).to(.3,{position:cc.v3(t.getChildByName("hundredThousands").x,40.4+80.8*o[5],0)}).start()},e.prototype.initScore=function(){function t(t,e){var o=r.default.GameManage.convertNum(e);t.getChildByName("unit").y=40.4+80.8*o[0],t.getChildByName("decade").y=40.4+80.8*o[1],t.getChildByName("hundred").y=40.4+80.8*o[2],t.getChildByName("thousand").y=40.4+80.8*o[3],t.getChildByName("tenThousands").y=40.4+80.8*o[4],t.getChildByName("hundredThousands").y=40.4+80.8*o[5]}r.default.gameData.scoreNum>=1e3?this.score.getChildByName("shiban").active=!1:this.score.getChildByName("shiban").active=!0,r.default.gameData.scoreNum>=1e5?this.score.scale=1.03:this.score.scale=1.23,r.default.gameData.bestScore>=1e3?this.bestScore.getChildByName("shiban").active=!1:this.bestScore.getChildByName("shiban").active=!0,r.default.gameData.bestScore>=1e5?this.bestScore.scale=1.03:this.bestScore.scale=1.23,t(this.score,r.default.gameData.scoreNum),t(this.bestScore,r.default.gameData.bestScore)},e.prototype.onClick=function(t){if(!r.default.GameManage.getIsGuide())switch(t){case"btnSet":this.setIndex=0==this.setIndex?1:0,this.topNode.stopAllActions(),cc.tween(this.topNode).to(.3,{position:cc.v3(0,[0,-100][this.setIndex],0)},{easing:cc.easing.backOut}).start();break;case"btnFall":if(r.default.GameManage.isFall||r.default.gameData.useFallNum>1)return;this.usePropName="fall",r.default.UIManage.showUI(u.UIEnum.sureUI);break;case"btnRefresh":if(2==r.default.gameData.useRefreshNum)return;this.usePropName="refresh",r.default.UIManage.showUI(u.UIEnum.sureUI)}},i([b(cc.Node)],e.prototype,"score",void 0),i([b(cc.Node)],e.prototype,"bestScore",void 0),i([b(cc.Prefab)],e.prototype,"planOne",void 0),i([b(cc.Prefab)],e.prototype,"cubPile",void 0),i([b(cc.Prefab)],e.prototype,"cubOne",void 0),i([b(cc.Node)],e.prototype,"planContent",void 0),i([b(cc.Node)],e.prototype,"bottomCubPileContent",void 0),i([b(cc.Node)],e.prototype,"controlCubPileContent",void 0),i([b(cc.Node)],e.prototype,"cubContent",void 0),i([b(cc.Node)],e.prototype,"gameNode",void 0),i([b([cc.SpriteFrame])],e.prototype,"colorSpriteArr",void 0),i([b(cc.Prefab)],e.prototype,"combPrefab",void 0),i([b(cc.Node)],e.prototype,"topNode",void 0),i([b(cc.Node)],e.prototype,"langNode",void 0),i([b(cc.Prefab)],e.prototype,"lang",void 0),i([b(cc.Button)],e.prototype,"arrBtn",void 0),i([b(cc.Node)],e.prototype,"propNode",void 0),i([b(cc.Prefab)],e.prototype,"clearAll",void 0),o=i([m],e)}(s.BaseUI);o.default=C,cc._RF.pop()},{"../Core/App":"App","../Core/AudioManage":"AudioManage","../Core/BaseUI":"BaseUI","../Core/EffectManage":"EffectManage","../Core/UIManage":"UIManage","../SDK/FacebookIG":"FacebookIG","./clearAll":"clearAll","./cubManage":"cubManage","./cubeOne":"cubeOne","./cubePile":"cubePile","./planOne":"planOne"}],getScore:[function(t,e,o){"use strict";cc._RF.push(e,"467aebTJZ5DMoJkQGV4xOUE","getScore");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../Core/App"),c=t("../../Core/AudioManage"),s=t("../gameScene"),l=cc._decorator,u=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrGuliSpf=[],e.arrNode=[],e.arrFont=[],e.score=0,e.color=null,e}return a(e,t),e.prototype.start=function(){var t=this;this.setImg(),this.arrNode.forEach(function(e){var o=e.scale,n=t.arrNode.indexOf(e);e.opacity=0,cc.tween(e).delay(.15*n).call(function(){e.opacity=255}).to(.15,{scale:1.5*o}).to(.05,{scale:o}).delay(.8).to(.3-.05*n,{opacity:0}).start()})},e.prototype.setImg=function(){if(this.node.zIndex=1,r.default.GameManage.eliminateCount>1){var t=r.default.GameManage.eliminateCount-2;t=t>2?2:t,r.default.AudioManage.playSound(c.MusicEnum.gulici+(t+1)),this.arrNode[0].getComponent(cc.Sprite).spriteFrame=this.arrGuliSpf[t],this.node.x<-(r.default.getCom(s.default).node.width/2-this.arrNode[0].width/2*this.node.scale-10)&&(this.node.x=-(r.default.getCom(s.default).node.width/2-this.arrNode[0].width/2*this.node.scale-10)),this.node.x>r.default.getCom(s.default).node.width/2-this.arrNode[0].width/2*this.node.scale-10&&(this.node.x=r.default.getCom(s.default).node.width/2-this.arrNode[0].width/2*this.node.scale-10)}else this.node.scale=.9,this.arrNode[0].active=!1,this.arrNode[1].y=0;this.arrNode[1].getComponent(cc.Label).string=this.score.toString()},i([h(cc.SpriteFrame)],e.prototype,"arrGuliSpf",void 0),i([h(cc.Node)],e.prototype,"arrNode",void 0),i([h(cc.Font)],e.prototype,"arrFont",void 0),i([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Core/App":"App","../../Core/AudioManage":"AudioManage","../gameScene":"gameScene"}],goAhead:[function(t,e,o){"use strict";cc._RF.push(e,"f04adiqN4JFb4meiFAZgr5c","goAhead");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../Core/EffectManage"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onShow=function(){this.node.position=cc.v3(-700,250),cc.tween(this.node).delay(.1).to(.7,{position:cc.v3(0,250)},{easing:cc.easing.backOut}).delay(.6).to(.7,{position:cc.v3(700,250)},{easing:cc.easing.backIn}).start()},i([s],e)}(r.baseEffect));o.default=l,cc._RF.pop()},{"../../Core/EffectManage":"EffectManage"}],guideData:[function(t,e,o){"use strict";cc._RF.push(e,"bfbdd38YL5ARpPFxi2MLWsw","guideData"),Object.defineProperty(o,"__esModule",{value:!0}),o.guideData=void 0;var n=function(){function t(){}return t.prototype.getGuideData2=function(){return{cubOneMap:{0:{3:"huang",4:"huang"},1:{3:"huang",4:"huang"},2:{3:"huang",4:"huang"},3:{0:"huang",1:"huang",2:"huang",5:"huang",6:"huang",7:"huang"},4:{0:"huang",1:"huang",2:"huang",5:"huang",6:"huang",7:"huang"},5:{3:"huang",4:"huang"},6:{3:"huang",4:"huang"},7:{3:"huang",4:"huang"}},cubPileMap:[null,{type:12,color:"zi",index:9},null]}},t}();o.guideData=n,cc._RF.pop()},{}],loadManage:[function(t,e,o){"use strict";cc._RF.push(e,"5237fvn+K9OEoG6jUzg0llj","loadManage");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(a,i){function r(t){try{s(n.next(t))}catch(e){i(e)}}function c(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(c){i=[6,c],n=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t.loadRes=function(t,e,o){cc.resources.load(t,e,function(t,e){t?cc.error(t):o(e)})},t.setImgByUrl=function(t,e,o){cc.resources.load(e,cc.SpriteFrame,function(e,n){e?cc.error(e):(t.spriteFrame=n,o&&o())})},t.loadPrefab=function(t,e){cc.resources.load(t,cc.Prefab,function(t,o){t?cc.error(t):e(o)})},t.loadPrefabStic=function(t){return n(this,void 0,Promise,function(){return a(this,function(){return[2,new Promise(function(e){cc.resources.load(t,cc.Prefab,function(t,o){t?cc.error(t):e(o)})})]})})},t}();o.default=i,cc._RF.pop()},{}],pkItem:[function(t,e,o){"use strict";cc._RF.push(e,"4dac6YrMT1FTKsQtehF1Fgj","pkItem");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../SDK/FacebookIG"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.arrBgSpf=[],e.lbScore=null,e.head=null,e.crown=null,e.arrCrownSpf=[],e.defaultHead=null,e}return a(e,t),e.prototype.refresh=function(t,e,o){o?r.default.setHead(this.head,o):this.head.spriteFrame=this.defaultHead,this.bg.spriteFrame=this.arrBgSpf[e],this.lbScore.string=t.toString(),this.crown.spriteFrame=this.arrCrownSpf[e]},i([l(cc.Sprite)],e.prototype,"bg",void 0),i([l(cc.SpriteFrame)],e.prototype,"arrBgSpf",void 0),i([l(cc.Label)],e.prototype,"lbScore",void 0),i([l(cc.Sprite)],e.prototype,"head",void 0),i([l(cc.Sprite)],e.prototype,"crown",void 0),i([l(cc.SpriteFrame)],e.prototype,"arrCrownSpf",void 0),i([l(cc.SpriteFrame)],e.prototype,"defaultHead",void 0),i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../SDK/FacebookIG":"FacebookIG"}],planOne:[function(t,e,o){"use strict";cc._RF.push(e,"688d9nwpVVGjpBKxW5JX8v9","planOne");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.colorIndex=void 0;var r,c=t("../Core/App"),s=cc._decorator,l=s.ccclass,u=s.property;(function(t){t[t.hong=0]="hong",t[t.huang=1]="huang",t[t.lan=2]="lan",t[t.lv=3]="lv",t[t.zi=4]="zi"})(r=o.colorIndex||(o.colorIndex={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.X=null,e.Y=null,e.worldP=null,e.hasCub=null,e.planNode=null,e.tipNode=null,e.arrPlanSpf=[],e.isTip=!1,e}return a(e,t),e.prototype.init=function(t,e){this.X=t,this.Y=e;var o=(t-(c.default.GameManage.H-1)/2)*c.default.GameManage.space,n=(e-(c.default.GameManage.V-1)/2)*c.default.GameManage.space,a=cc.v3(o,n);this.worldP=this.node.parent.parent.convertToWorldSpaceAR(a),this.node.position=a,this.planNode.active=!1},e.prototype.checkPosIsOk=function(t){var e=Math.abs(this.worldP.x-t.x)<.5*c.default.GameManage.space,o=Math.abs(this.worldP.y-t.y)<.5*c.default.GameManage.space,n=null==this.hasCub;return e&&o&&n},e.prototype.setImg=function(t){this.planNode.getComponent(cc.Sprite).spriteFrame=this.arrPlanSpf[r[t]]},e.prototype.onTip=function(){this.isTip=!0,this.planNode.active=!0},e.prototype.onUnTip=function(){this.isTip=!1,this.planNode.active=!1},e.prototype.grayAnction=function(t,e,o){var n=this;this.hasCub?this.scheduleOnce(function(){n.hasCub.setGray(),e.index++,o()},t):(e.index++,o())},i([u(cc.Node)],e.prototype,"planNode",void 0),i([u(cc.Node)],e.prototype,"tipNode",void 0),i([u(cc.SpriteFrame)],e.prototype,"arrPlanSpf",void 0),i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Core/App":"App"}],propNode:[function(t,e,o){"use strict";cc._RF.push(e,"238d5hN9pNNBYbpDoimMWmd","propNode");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onEnable=function(){this.unscheduleAllCallbacks(),this.node.children.forEach(function(t){var e=t.x/Math.abs(t.x);t.x+=t.width*e,t.stopAllActions(),cc.tween(t).by(.2,{position:cc.v3(-t.width*e,0,0)}).start()})},e.prototype.onHide=function(){var t=this;this.node.children.forEach(function(t){var e=t.x/Math.abs(t.x);t.stopAllActions(),cc.tween(t).by(.2,{position:cc.v3(t.width*e,0,0)}).start()}),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.node.active=!1},.2)},i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],rankItem:[function(t,e,o){"use strict";cc._RF.push(e,"91041d+WGFMgYYK9B7q4tje","rankItem");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Core/App"),c=t("../Core/AudioManage"),s=t("../SDK/FacebookIG"),l=t("../UI/RankUI"),u=cc._decorator,h=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.lbRank=null,e.lbScore=null,e.arrBtn=[],e.crown=null,e.crownSpf=[],e.headKuang=null,e.arrKuangSpf=[],e.photo=null,e.playerData=null,e}return a(e,t),e.prototype.start=function(){},e.prototype.refresh=function(t,e){this.playerData=e.player,this.lbRank.string=(t+1).toString(),this.crown.node.active=t<3,this.crown.spriteFrame=this.crownSpf[t],this.headKuang.spriteFrame=this.arrKuangSpf[Math.min(t,this.arrKuangSpf.length-1)],this.lbScore.string=e.score.toString(),this.arrBtn[0].active=!e.isSelf,this.arrBtn[1].active=e.isSelf,s.default.setHead(this.photo,e.player.getPhoto())},e.prototype.clickEvent=function(t){if(r.default.buttonAnction>0)cc.warn("\u6309\u94aecd:",r.default.buttonAnction);else if(r.default.isPlayAnction)cc.warn("\u6b63\u5728\u64ad\u52a8\u753b");else{r.default.buttonAnction=.3;var e=t.currentTarget,o=e.name;this.onClick(o,e),r.default.AudioManage.playSound(c.MusicEnum.button)}},e.prototype.onClick=function(t){switch(t){case"btnPk":s.default.contextCreateAsync(this.playerData.getID(),function(){s.default.setOtherPlayer(),s.default.isSolo=!1,r.default.getCom(l.default).onPlay()},function(){s.default.setOtherPlayer(),s.default.isSolo=!1,r.default.getCom(l.default).onPlay()});break;case"btnShare":s.default.shareAsync()}},i([d(cc.Node)],e.prototype,"content",void 0),i([d(cc.Label)],e.prototype,"lbRank",void 0),i([d(cc.Label)],e.prototype,"lbScore",void 0),i([d(cc.Node)],e.prototype,"arrBtn",void 0),i([d(cc.Sprite)],e.prototype,"crown",void 0),i([d(cc.SpriteFrame)],e.prototype,"crownSpf",void 0),i([d(cc.Sprite)],e.prototype,"headKuang",void 0),i([d(cc.SpriteFrame)],e.prototype,"arrKuangSpf",void 0),i([d(cc.Sprite)],e.prototype,"photo",void 0),i([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Core/App":"App","../Core/AudioManage":"AudioManage","../SDK/FacebookIG":"FacebookIG","../UI/RankUI":"RankUI"}],tipCube:[function(t,e,o){"use strict";cc._RF.push(e,"653fa1NRlNIx7zvOLu05Tt5","tipCube");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onEnable=function(){this.node.stopAllActions(),this.node.opacity=255,cc.tween(this.node).to(.5,{opacity:0}).to(.5,{opacity:255}).union().repeatForever().start()},i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],tipJiazai:[function(t,e,o){"use strict";cc._RF.push(e,"8263al4oq9DTLIJ6uQPLf9t","tipJiazai");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onEnable=function(){this.node.getChildByName("jiazai").angle=0,cc.tween(this.node.getChildByName("jiazai")).by(3,{angle:-360}).repeatForever().start()},i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}]},{},["App","AudioManage","BaseAnction","BaseUI","EffectManage","GameManage","LocalManage","RootNode","UIManage","bomb","clearAll","cubManage","cubeOne","cubePile","break","comb","getScore","goAhead","gameScene","guideData","pkItem","planOne","propNode","rankItem","tipCube","tipJiazai","FacebookIG","AddCoin","Guide","Loading","LoopScrollView","MesgUI","PoolManage","loadManage","GuideUI","MenuUI","RankPkUI","RankUI","ReliveUI","ResultUI","SetUI","SureUI"]);